<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 5.1, http://www.gnu.org/software/texinfo/ -->
<head>
<title>Maxima Manual: Функции и переменные для отладки</title>

<meta name="description" content="Maxima Manual: Функции и переменные для отладки">
<meta name="keywords" content="Maxima Manual: Функции и переменные для отладки">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link href="maxima_toc.html#Top" rel="start" title="Top">
<link href="maxima_262.html#g_t_0423_043a_0430_0437_0430_0442_0435_043b_044c-_0444_0443_043d_043a_0446_0438_0439-_0438-_043f_0435_0440_0435_043c_0435_043d_043d_044b_0445" rel="index" title="Указатель функций и переменных">
<link href="maxima_toc.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="maxima_148.html#g_t_041e_0442_043b_0430_0434_043a_0430" rel="up" title="Отладка">
<link href="maxima_152.html#g_t_041f_0430_043a_0435_0442-augmented_005flagrangian" rel="next" title="Пакет augmented_lagrangian">
<link href="maxima_150.html#g_t_0421_043f_0435_0446_0438_0430_043b_044c_043d_044b_0435-_043a_043e_043c_0430_043d_0434_044b" rel="previous" title="Специальные команды">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.indentedblock {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smallindentedblock {margin-left: 3.2em; font-size: smaller}
div.smalllisp {margin-left: 3.2em}
kbd {font-style:oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nocodebreak {white-space:nowrap}
span.nolinebreak {white-space:nowrap}
span.roman {font-family:serif; font-weight:normal}
span.sansserif {font-family:sans-serif; font-weight:normal}
ul.no-bullet {list-style: none}
body {color: black; background: white;  margin-left: 8%; margin-right: 13%;
      font-family: "FreeSans", sans-serif}
h1 {font-size: 150%; font-family: "FreeSans", sans-serif}
h2 {font-size: 125%; font-family: "FreeSans", sans-serif}
h3 {font-size: 100%; font-family: "FreeSans", sans-serif}
a[href] {color: rgb(0,0,255); text-decoration: none;}
a[href]:hover {background: rgb(220,220,220);}
div.textbox {border: solid; border-width: thin; padding-top: 1em;
    padding-bottom: 1em; padding-left: 2em; padding-right: 2em}
div.titlebox {border: none; padding-top: 1em; padding-bottom: 1em;
    padding-left: 2em; padding-right: 2em; background: rgb(200,255,255);
    font-family: sans-serif}
div.synopsisbox {
    border: none; padding-top: 1em; padding-bottom: 1em; padding-left: 2em;
    padding-right: 2em; background: rgb(255,220,255);}
pre.example {border: 1px solid rgb(180,180,180); padding-top: 1em;
    padding-bottom: 1em; padding-left: 1em; padding-right: 1em;
    background-color: rgb(238,238,255)}
div.spacerbox {border: none; padding-top: 2em; padding-bottom: 2em}
div.image {margin: 0; padding: 1em; text-align: center}
div.categorybox {border: 1px solid gray; padding-top: 1em; padding-bottom: 1em;
    padding-left: 1em; padding-right: 1em; background: rgb(247,242,220)}
img {max-width:80%; max-height: 80%; display: block; margin-left: auto; margin-right: auto}

-->
</style>

<link rel="icon" href="figures/favicon.ico">

</head>

<body lang="ru" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">
<a name="g_t_0424_0443_043d_043a_0446_0438_0438-_0438-_043f_0435_0440_0435_043c_0435_043d_043d_044b_0435-_0434_043b_044f-_043e_0442_043b_0430_0434_043a_0438"></a>
<div class="header">
<p>
Previous: <a href="maxima_150.html#g_t_0421_043f_0435_0446_0438_0430_043b_044c_043d_044b_0435-_043a_043e_043c_0430_043d_0434_044b" accesskey="p" rel="previous">Специальные команды</a>, Up: <a href="maxima_148.html#g_t_041e_0442_043b_0430_0434_043a_0430" accesskey="u" rel="up">Отладка</a> &nbsp; [<a href="maxima_toc.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="maxima_262.html#g_t_0423_043a_0430_0437_0430_0442_0435_043b_044c-_0444_0443_043d_043a_0446_0438_0439-_0438-_043f_0435_0440_0435_043c_0435_043d_043d_044b_0445" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Funkcii-i-peremennye-dlya-otladki"></a>
<h3 class="section">39.3 Функции и переменные для отладки</h3>

<a name="Item_003a-Debugging_002fdefvr_002frefcheck"></a><dl>
<dt><a name="index-refcheck"></a>Управляющая переменная: <strong>refcheck</strong></dt>
<dd><p>Значение по умолчанию: <code>false</code>
</p>
<p>Если <code>refcheck</code> равна <code>true</code>, то Maxima печатает сообщение
каждый раз как имеющая значение переменная используется в вычислении
первый раз.
</p>
<div class=categorybox>
Категории:<a href="maxima_263.html#Category_003a-_0412_044b_0447_0438_0441_043b_0435_043d_0438_0435">Вычисление</a>
&middot;<a href="maxima_263.html#Category_003a-_0420_0430_0431_043e_0442_0430-_0432-_043a_043e_043d_0441_043e_043b_0438">Работа в консоли</a>
&middot;<a href="maxima_263.html#Category_003a-_0413_043b_043e_0431_0430_043b_044c_043d_044b_0435-_0444_043b_0430_0433_0438">Глобальные флаги</a>
&middot;</div></dd></dl>

<a name="Item_003a-Debugging_002fdefvr_002fsetcheck"></a><dl>
<dt><a name="index-setcheck"></a>Управляющая переменная: <strong>setcheck</strong></dt>
<dd><p>Значение по умолчанию: <code>false</code>
</p>
<p>Если <code>setcheck</code> равно списку переменных (возможно с индексом), 
то Maxima печатает сообщение всякий раз как переменным, или
переменным с индексом, присваивается значение при помощи
обычного оператора присваивания <code>:</code>, или оператора присваивания 
<code>::</code>, или при связывании параметров функций, но не при
определении функций <code>:=</code> или макросов <code>::=</code>.
Сообщение содержит имя переменной и присваиваемое значение.
</p>
<p>Переменной <code>setcheck</code> может быть присвоено значение <code>all</code> или <code>true</code>,
что подразумевает все переменные.
</p>
<p>Каждое присваивание <code>setcheck</code> устанавливает новый список контролируемых переменных
и все переменные, которые ранее были в списке <code>setcheck</code>, забываются.
</p>
<p>Переменные, присваиваемые <code>setcheck</code> должны быть экранированы, иначе
они могут быть вычислены. Например, если переменные <code>x</code>, <code>y</code> и <code>z</code> 
уже имеют значения, тогда 
</p>
<div class="example">
<pre class="example">setcheck: ['x, 'y, 'z]$
</pre></div>

<p>устанавливает контроль присваивания для этих переменных.
</p>
<p>Сообщение не выводится, если переменной, включенной в список <code>setcheck</code>,
присваивается значение равное ей самой, например,  <code>X: 'X</code>.
</p>
<div class=categorybox>
Категории:<a href="maxima_263.html#Category_003a-_0420_0430_0431_043e_0442_0430-_0432-_043a_043e_043d_0441_043e_043b_0438">Работа в консоли</a>
&middot;<a href="maxima_263.html#Category_003a-_0413_043b_043e_0431_0430_043b_044c_043d_044b_0435-_0444_043b_0430_0433_0438">Глобальные флаги</a>
&middot;</div></dd></dl>

<a name="Item_003a-Debugging_002fdefvr_002fsetcheckbreak"></a><dl>
<dt><a name="index-setcheckbreak"></a>Управляющая переменная: <strong>setcheckbreak</strong></dt>
<dd><p>Значение по умолчанию: <code>false</code>
</p>
<p>Если <code>setcheckbreak</code> равно <code>true</code>,
то Maxima генерирует прерывание всякий раз как переменной
из списка <code>setcheck</code> присваивается новое значение.
Прерывание случается до присваивания нового значения.
В этот момент, переменная <code>setval</code> содержит новое значение переменной.
Таким образом, возможно присвоить переменной другое значение путем
присваивания его переменной <code>setval</code>.
</p>
<p>См. также <code>setcheck</code> и <code>setval</code>.
</p>
<div class=categorybox>
Категории:<a href="maxima_263.html#Category_003a-_0420_0430_0431_043e_0442_0430-_0432-_043a_043e_043d_0441_043e_043b_0438">Работа в консоли</a>
&middot;<a href="maxima_263.html#Category_003a-_0413_043b_043e_0431_0430_043b_044c_043d_044b_0435-_0444_043b_0430_0433_0438">Глобальные флаги</a>
&middot;</div></dd></dl>

<a name="Item_003a-Debugging_002fdefvr_002fsetval"></a><dl>
<dt><a name="index-setval"></a>Системная переменная: <strong>setval</strong></dt>
<dd><p>Содержит новое значение, которое будет присвоено переменной, если случается
прерывание, контролируемое <code>setcheckbreak</code>.
Таким образом, возможно присвоить переменной другое значение путем
присваивания его переменной <code>setval</code>.
</p>
<p>См. также <code>setcheck</code> и <code>setcheckbreak</code>.
</p>
<div class=categorybox>
Категории:<a href="maxima_263.html#Category_003a-_0420_0430_0431_043e_0442_0430-_0432-_043a_043e_043d_0441_043e_043b_0438">Работа в консоли</a>
&middot;<a href="maxima_263.html#Category_003a-_0413_043b_043e_0431_0430_043b_044c_043d_044b_0435-_043f_0435_0440_0435_043c_0435_043d_043d_044b_0435">Глобальные переменные</a>
&middot;</div></dd></dl>

<a name="Item_003a-Debugging_002fdeffn_002ftimer"></a><dl>
<dt><a name="index-timer"></a>Функция: <strong>timer</strong> <em>(<var>f_1</var>, ..., <var>f_n</var>)</em></dt>
<dt><a name="index-timer-1"></a>Функция: <strong>timer</strong> <em>(all)</em></dt>
<dt><a name="index-timer-2"></a>Функция: <strong>timer</strong> <em>()</em></dt>
<dd><p>Добавляет функции <var>f_1</var>, ..., <var>f_n</var> к списку функций,
для которых собирается статистика тайминга.
Последовательные вызовы <code>timer(f)$ timer(g)$</code> сначала добавляют к списку <code>f</code> 
а затем <code>g</code>, т.е. список пополняется от одного вызова <code>timer</code> к другому.
</p>
<p><code>timer(all)</code> добавляет все пользовательские функции,
которые определяются глобальной переменной <code>functions</code>,
к списку контролируемых функций.
</p>
<p>Без аргументов, 
<code>timer</code> возвращает список контролируемых функций.
</p>
<p>Maxima сохраняет информацию о времени выполнения контролируемых функций.
Функция <code>timer_info</code> возвращает статистику тайминга, включающую: 
среднее время выполнения, число вызовов и полное время выполнения.
Функция <code>untimer</code> удаляет функцию из списка контролируемых функций.
</p>
<p><code>timer</code> не вычисляет свои аргументы. 
Команды <code>f(x) := x^2$ g:f$ timer(g)$</code> не добавят <code>f</code> к списку
тайминг-контроля.
</p>
<p>Если действует трассировка <code>trace(f)</code>, то <code>timer(f)</code> не работает,
т.к. <code>trace</code> и <code>timer</code> не могут действовать одновременно.
</p>
<p>См. также <code>timer_devalue</code>.
</p>
<div class=categorybox>
Категории:<a href="maxima_263.html#Category_003a-_041e_0442_043b_0430_0434_043a_0430">Отладка</a>
&middot;</div></dd></dl>

<a name="Item_003a-Debugging_002fdeffn_002funtimer"></a><dl>
<dt><a name="index-untimer"></a>Функция: <strong>untimer</strong> <em>(<var>f_1</var>, ..., <var>f_n</var>)</em></dt>
<dt><a name="index-untimer-1"></a>Функция: <strong>untimer</strong> <em>()</em></dt>
<dd><p>Удаляет функции <var>f_1</var>, ..., <var>f_n</var> из списка 
тайминг-контроля.
</p>
<p>Без аргументов, <code>untimer</code> удаляет все функции из списка тайминг-контроля.
</p>
<p>После выполнения <code>untimer (f)</code>, функция <code>timer_info (f)</code> продолжает
содержать ранее собранную статистику, хотя
<code>timer_info()</code> (без аргументов) не возвращает информацию о
функциях, которые на данный момент не включены в список тайминг-контроля.
Вызов <code>timer (f)</code> обнуляет всю предыдущую статистику и снова
добавляет <code>f</code> к списку тайминг-контроля.
</p>
<div class=categorybox>
Категории:<a href="maxima_263.html#Category_003a-_041e_0442_043b_0430_0434_043a_0430">Отладка</a>
&middot;</div></dd></dl>

<a name="Item_003a-Debugging_002fdefvr_002ftimer_005fdevalue"></a><dl>
<dt><a name="index-timer_005fdevalue"></a>Управляющая переменная: <strong>timer_devalue</strong></dt>
<dd><p>Значение по умолчанию: <code>false</code>
</p>
<p>Если <code>timer_devalue</code> равно <code>true</code>, то Maxima вычитает из статистики
контролируемой функции время выполнения других контролируемых функций. 
В противном случае, статистика каждой функции включает время,
затраченное на выполнение других функций.
Заметим, что время, затраченное на выполнение неконтролируемых функций,
не вычитается из общего времени.
</p>
<p>См. также <code>timer</code> и <code>timer_info</code>.
</p>
<div class=categorybox>
Категории:<a href="maxima_263.html#Category_003a-_041e_0442_043b_0430_0434_043a_0430">Отладка</a>
&middot;<a href="maxima_263.html#Category_003a-_0413_043b_043e_0431_0430_043b_044c_043d_044b_0435-_0444_043b_0430_0433_0438">Глобальные флаги</a>
&middot;</div></dd></dl>

<a name="Item_003a-Debugging_002fdeffn_002ftimer_005finfo"></a><dl>
<dt><a name="index-timer_005finfo"></a>Функция: <strong>timer_info</strong> <em>(<var>f_1</var>, ..., <var>f_n</var>)</em></dt>
<dt><a name="index-timer_005finfo-1"></a>Функция: <strong>timer_info</strong> <em>()</em></dt>
<dd><p>Для функций <var>f_1</var>, ..., <var>f_n</var>,
возвращает матрицу, содержащую информацию о тайминге каждой из функций.
Без аргументов, <code>timer_info</code> возвращает информацию для всех
контролируемых функций.
</p>
<p>Матрица, возвращаемая <code>timer_info</code>, содержит: имя функции,
среднее время вызова функции, число вызовов, общее время
и <code>gctime</code>, что обозначает &quot;время сборки мусора&quot; в Macsyma,
но сейчас это время всегда равно нулю.
</p>
<p>Данные, сообщаемые <code>timer_info</code>, могут быть получены другим способом
при помощи функции <code>get</code>:
</p>
<div class="example">
<pre class="example">get(f, 'calls);  get(f, 'runtime);  get(f, 'gctime);
</pre></div>

<p>См. также <code>timer</code>.
</p>
<div class=categorybox>
Категории:<a href="maxima_263.html#Category_003a-_041e_0442_043b_0430_0434_043a_0430">Отладка</a>
&middot;</div></dd></dl>

<a name="Item_003a-Debugging_002fdeffn_002ftrace"></a><dl>
<dt><a name="index-trace"></a>Функция: <strong>trace</strong> <em>(<var>f_1</var>, ..., <var>f_n</var>)</em></dt>
<dt><a name="index-trace-1"></a>Функция: <strong>trace</strong> <em>(all)</em></dt>
<dt><a name="index-trace-2"></a>Функция: <strong>trace</strong> <em>()</em></dt>
<dd><p>Устанавливает трассировку для функций <var>f_1</var>, ..., <var>f_n</var>,
т.е. Maxima будет печатать отладочную информацию при каждом
вызове любой из этих функций.
Последовательные вызовы <code>trace(f)$ trace(g)$</code> сначала включает трассировку <code>f</code> 
а затем трассировку <code>g</code>, т.е. список трассируемых функций 
пополняется от одного вызова <code>trace</code> к другому.
</p>
<p><code>trace(all)</code> включает трассировку для всех пользовательских функций,
которые определяются глобальной переменной <code>functions</code>.
</p>
<p>Без аргументов, 
<code>trace</code> возвращает список всех трассируемых функций.
</p>
<p>Функция <code>untrace</code> отменяет трассировку.
См. также <code>trace_options</code>. 
</p>
<p>Функция <code>trace</code> не вычисляет свои аргументы. 
Команды <code>f(x) := x^2$ g:f$ trace(g)$</code> не добавят <code>f</code> к списку
трассируемых функций.
</p>
<p>Если функция переопределяется, то она удаляется из списка трассируемых функций.
Т.е. после <code>timer(f)$ f(x) := x^2$</code>,
функция <code>f</code> трассироваться не будет.
</p>
<p>Если действует <code>timer (f)</code>, то <code>trace (f)</code> не работает; 
т.к. <code>trace</code> и <code>timer</code> не могут действовать одновременно.
</p>
<div class=categorybox>
Категории:<a href="maxima_263.html#Category_003a-_041e_0442_043b_0430_0434_043a_0430">Отладка</a>
&middot;</div></dd></dl>

<a name="Item_003a-Debugging_002fdeffn_002ftrace_005foptions"></a><dl>
<dt><a name="index-trace_005foptions"></a>Функция: <strong>trace_options</strong> <em>(<var>f</var>, <var>option_1</var>, ..., <var>option_n</var>)</em></dt>
<dt><a name="index-trace_005foptions-1"></a>Функция: <strong>trace_options</strong> <em>(<var>f</var>)</em></dt>
<dd><p>Устанавливает опции трассировки для функции <var>f</var>.
Любые предыдущие опции переопределяются.
<code>trace_options (<var>f</var>, ...)</code> не действует если не включена 
трассировка <code>trace (<var>f</var>)</code> (либо до, либо после вызова <code>trace_options</code>). 
</p>
<p><code>trace_options (<var>f</var>)</code> возвращает все опции в значение &quot;по умолчанию&quot;.
</p>
<p>Существуют следующие ключевые слова опций трассировки:
</p>
<ul>
<li> <code>noprint</code>
Не печатать сообщения при начале и завершении выполнения функции.
</li><li> <code>break</code>
Установить точки останова до начала выполнения функции и после ее 
завершения. См. <code>break</code>.
</li><li> <code>lisp_print</code>
Выводить аргументы и возвращаемые значения в виде Lisp объектов.
</li><li> <code>info</code>
Печатать <code>-&gt; true</code> при входе и выходе из функции.
</li><li> <code>errorcatch</code>
Перехватывать ошибки с предоставлением опций: сгенерировать ошибку,
вычислить функцию повторно, задать возвращаемое значение.
</li></ul>

<p>Опции трассировки могут задаваться двумя способами.
Одно ключевое слово включает соответствующую опцию безусловно.
Заметим, что для включения опции <var>foo</var> не следует указывать <code><var>foo</var>: true</code>,
кроме того, опции не надо экранировать.
Ключевое слово с предикатом включает опцию условно в зависимости
от значения предиката.
</p>
<p>Существуют следующие аргументы предиката <code>[level, direction, function, item]</code>,
где <code>level</code> есть уровень рекурсии;  <code>direction</code> есть либо <code>enter</code>, либо <code>exit</code>;
<code>function</code> есть имя функции; и <code>item</code> есть список аргументов (при входе)
или возвращаемое значение (при выходе).
</p>
<p>Пример применения безусловных опций трассировки:
</p>
<div class="example">
<pre class="example">(%i1) ff(n) := if equal(n, 0) then 1 else n * ff(n - 1)$

(%i2) trace (ff)$

(%i3) trace_options (ff, lisp_print, break)$

(%i4) ff(3);
</pre></div>

<p>Ниже, та же функция условной опцией трассировки <code>break</code>:
</p>
<div class="example">
<pre class="example">(%i5) trace_options (ff, break(pp))$

(%i6) pp (level, direction, function, item) := block (print (item),
    return (function = 'ff and level = 3 and direction = exit))$

(%i7) ff(6);
</pre></div>

<div class=categorybox>
Категории:<a href="maxima_263.html#Category_003a-_041e_0442_043b_0430_0434_043a_0430">Отладка</a>
&middot;</div></dd></dl>

<a name="Item_003a-Debugging_002fdeffn_002funtrace"></a><dl>
<dt><a name="index-untrace"></a>Функция: <strong>untrace</strong> <em>(<var>f_1</var>, ..., <var>f_n</var>)</em></dt>
<dt><a name="index-untrace-1"></a>Функция: <strong>untrace</strong> <em>()</em></dt>
<dd><p>Отменяет трассировку функций <var>f_1</var>, ..., <var>f_n</var>,
установленную ранее при помощи <code>trace</code>.
Без аргументов, <code>untrace</code> отменяет трассировку всех функций.
</p>
<p>Функция <code>untrace</code> возвращает список функций, для которых
была отменена трассировка.
</p>
<div class=categorybox>
Категории:<a href="maxima_263.html#Category_003a-_041e_0442_043b_0430_0434_043a_0430">Отладка</a>
&middot;</div></dd></dl>

<hr>
<div class="header">
<p>
Previous: <a href="maxima_150.html#g_t_0421_043f_0435_0446_0438_0430_043b_044c_043d_044b_0435-_043a_043e_043c_0430_043d_0434_044b" accesskey="p" rel="previous">Специальные команды</a>, Up: <a href="maxima_148.html#g_t_041e_0442_043b_0430_0434_043a_0430" accesskey="u" rel="up">Отладка</a> &nbsp; [<a href="maxima_toc.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="maxima_262.html#g_t_0423_043a_0430_0437_0430_0442_0435_043b_044c-_0444_0443_043d_043a_0446_0438_0439-_0438-_043f_0435_0440_0435_043c_0435_043d_043d_044b_0445" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
