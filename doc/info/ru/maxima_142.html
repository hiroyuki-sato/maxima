<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 5.1, http://www.gnu.org/software/texinfo/ -->
<head>
<title>Maxima Manual: Функции</title>

<meta name="description" content="Maxima Manual: Функции">
<meta name="keywords" content="Maxima Manual: Функции">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link href="maxima_toc.html#Top" rel="start" title="Top">
<link href="maxima_262.html#g_t_0423_043a_0430_0437_0430_0442_0435_043b_044c-_0444_0443_043d_043a_0446_0438_0439-_0438-_043f_0435_0440_0435_043c_0435_043d_043d_044b_0445" rel="index" title="Указатель функций и переменных">
<link href="maxima_toc.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="maxima_140.html#g_t_041e_043f_0440_0435_0434_0435_043b_0435_043d_0438_0435-_0444_0443_043d_043a_0446_0438_0439" rel="up" title="Определение функций">
<link href="maxima_143.html#g_t_041c_0430_043a_0440_043e_0441_044b" rel="next" title="Макросы">
<link href="maxima_141.html#g_t_0412_0432_0435_0434_0435_043d_0438_0435-_0432-_043e_043f_0440_0435_0434_0435_043b_0435_043d_0438_0435-_0444_0443_043d_043a_0446_0438_0439" rel="previous" title="Введение в определение функций">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.indentedblock {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smallindentedblock {margin-left: 3.2em; font-size: smaller}
div.smalllisp {margin-left: 3.2em}
kbd {font-style:oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nocodebreak {white-space:nowrap}
span.nolinebreak {white-space:nowrap}
span.roman {font-family:serif; font-weight:normal}
span.sansserif {font-family:sans-serif; font-weight:normal}
ul.no-bullet {list-style: none}
body {color: black; background: white;  margin-left: 8%; margin-right: 13%;
      font-family: "FreeSans", sans-serif}
h1 {font-size: 150%; font-family: "FreeSans", sans-serif}
h2 {font-size: 125%; font-family: "FreeSans", sans-serif}
h3 {font-size: 100%; font-family: "FreeSans", sans-serif}
a[href] {color: rgb(0,0,255); text-decoration: none;}
a[href]:hover {background: rgb(220,220,220);}
div.textbox {border: solid; border-width: thin; padding-top: 1em;
    padding-bottom: 1em; padding-left: 2em; padding-right: 2em}
div.titlebox {border: none; padding-top: 1em; padding-bottom: 1em;
    padding-left: 2em; padding-right: 2em; background: rgb(200,255,255);
    font-family: sans-serif}
div.synopsisbox {
    border: none; padding-top: 1em; padding-bottom: 1em; padding-left: 2em;
    padding-right: 2em; background: rgb(255,220,255);}
pre.example {border: 1px solid rgb(180,180,180); padding-top: 1em;
    padding-bottom: 1em; padding-left: 1em; padding-right: 1em;
    background-color: rgb(238,238,255)}
div.spacerbox {border: none; padding-top: 2em; padding-bottom: 2em}
div.image {margin: 0; padding: 1em; text-align: center}
div.categorybox {border: 1px solid gray; padding-top: 1em; padding-bottom: 1em;
    padding-left: 1em; padding-right: 1em; background: rgb(247,242,220)}
img {max-width:80%; max-height: 80%; display: block; margin-left: auto; margin-right: auto}

-->
</style>

<link rel="icon" href="figures/favicon.ico">

</head>

<body lang="ru" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">
<a name="g_t_0424_0443_043d_043a_0446_0438_0438"></a>
<div class="header">
<p>
Next: <a href="maxima_143.html#g_t_041c_0430_043a_0440_043e_0441_044b" accesskey="n" rel="next">Макросы</a>, Previous: <a href="maxima_141.html#g_t_0412_0432_0435_0434_0435_043d_0438_0435-_0432-_043e_043f_0440_0435_0434_0435_043b_0435_043d_0438_0435-_0444_0443_043d_043a_0446_0438_0439" accesskey="p" rel="previous">Введение в определение функций</a>, Up: <a href="maxima_140.html#g_t_041e_043f_0440_0435_0434_0435_043b_0435_043d_0438_0435-_0444_0443_043d_043a_0446_0438_0439" accesskey="u" rel="up">Определение функций</a> &nbsp; [<a href="maxima_toc.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="maxima_262.html#g_t_0423_043a_0430_0437_0430_0442_0435_043b_044c-_0444_0443_043d_043a_0446_0438_0439-_0438-_043f_0435_0440_0435_043c_0435_043d_043d_044b_0445" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Funkcii"></a>
<h3 class="section">37.2 Функции</h3>
<a name="Obychnye-funkcii"></a>
<h4 class="subsection">37.2.1 Обычные функции</h4>

<div class=categorybox>
Категории:<a href="maxima_263.html#Category_003a-_041e_043f_0440_0435_0434_0435_043b_0435_043d_0438_0435-_0444_0443_043d_043a_0446_0438_0439">Определение функций</a>
&middot;<a href="maxima_263.html#Category_003a-_041f_0440_043e_0433_0440_0430_043c_043c_0438_0440_043e_0432_0430_043d_0438_0435">Программирование</a>
&middot;</div>
<p>Для определения функций в Maxima используется оператор <code>:=</code>.
Например
</p>
<div class="example">
<pre class="example">f(x) := sin(x)
</pre></div>

<p>определяет функцию <code>f</code>.
Функции без имени могут быть созданы при помощи <code>lambda</code>.
Например
</p>
<div class="example">
<pre class="example">lambda ([i, j], ...)
</pre></div>

<p>может быть использовано вместо <code>f</code>, и
</p>
<div class="example">
<pre class="example">f(i,j) := block ([], ...);
map (lambda ([i], i+1), l)
</pre></div>

<p>возвращает список с каждым элементом увеличенным на 1.
</p>
<p>Можно определить функцию с переменным числом аргументов, 
присваивая последнему аргументу список дополнительных параметров:
</p>
<div class="example">
<pre class="example">(%i1) f ([u]) := u;
(%o1)                      f([u]) := u
(%i2) f (1, 2, 3, 4);
(%o2)                     [1, 2, 3, 4]
(%i3) f (a, b, [u]) := [a, b, u];
(%o3)               f(a, b, [u]) := [a, b, u]
(%i4) f (1, 2, 3, 4, 5, 6);
(%o4)                 [1, 2, [3, 4, 5, 6]]
</pre></div>

<p>Правая часть определения функции является выражением.  Поэтому,
если требуется последовательность выражений, то можно
определить правую часть следующим образом
</p>
<div class="example">
<pre class="example">f(x) := (expr1, expr2, ...., exprn);
</pre></div>

<p>В этом случае, значение, возвращаемое функцией, будет равно значению <var>exprn</var>.
</p>
<p>Использование команды возврата <code>return</code> возможно тоько внутри программного 
блока <code>block</code>. Блок
</p>
<div class="example">
<pre class="example">block ([], expr1, ..., if (a &gt; 10) then return(a), ..., exprn)
</pre></div>

<p>сам по себе является выражением и может использоваться в правой части
определения функции.  При этом, команда возврата может быть выполнена
раньше достижения последнего выражения.
</p>
<p>Первый элемент блока <code>[]</code> может содержать список переменных
и присваиваемых им значений, например, такой как <code>[a: 3, b, c: []]</code>.
В результате, три переменные <code>a</code>,<code>b</code> и <code>c</code> 
не будут ссылаться на свои глобальные значения, а будут иметь локальные
значения внутри блока или внутри функций, вызываемых из этого блока.
Это называется термином <i>динамическое</i> связывание, поскольку локальные переменные
сохраняются от начала выполнения блока до его завершения.
Как только выполнение возвращается из блока, или его выполнение прерывается,
то старое значения переменных (если существуют) восстанавливаются.
Это хороший метод защиты значения переменных.
Отметим, что присваивание начальных значений переменных в блоке выполняется
параллельно.   Это означает, что если сделать <code>c: a</code>, в вышеизложенном примере,
то значение <code>c</code> будет равно значению <code>a</code> до входа в блок и до присваивания
<code>a</code> локального значения.   Поэтому, выполнение кода
</p>
<div class="example">
<pre class="example">block ([a: a], expr1, ... a: a+3, ..., exprn)
</pre></div>

<p>защитит внешнее значение переменной <code>a</code> от изменения внутри блока, и, с другой
стороны, обеспечит доступ к этому значению.   Иными словами, правая часть присваивания
вычисляется до выполнения каких-либо присваиваний.
Простое использование <code>block ([x], ...</code> приводит к тому, что <code>x</code> внутри блока
равна сама себе, как при запуске новой сессии <b>Maxima</b>.
</p>
<p>Фактические параметры функции трактуются точно так же, как локальные переменные 
в блоке.  Таким образом, при определении
</p>
<div class="example">
<pre class="example">f(x) := (expr1, ..., exprn);
</pre></div>

<p>и вызове
</p>
<div class="example">
<pre class="example">f(1);
</pre></div>

<p>создается контекст, аналогичный
</p>
<div class="example">
<pre class="example">block ([x: 1], expr1, ..., exprn)
</pre></div>

<p>Внутри функций, если правая часть определения функции может вычисляться
во время выполнения, полезно использовать <code>define</code> и, возможно, <code>buildq</code>.  
</p>
<a name="Funkcii_002dmassivy"></a>
<h4 class="subsection">37.2.2 Функции-массивы</h4>

<p>Функции-массивы сохраняют значение функции при первом вызове с определенными значениями параметров,
и возвращают сохраненное значение без перевычисления при последующих вызовах с теми же 
параметрами.  Такие функции часто называются &ldquo;<i>функции с памятью</i>&rdquo;.
</p>
<p>Имена функций-массивов добавляются к глобальной переменной <code>arrays</code>
(не к глобальной переменной <code>functions</code>).
Функция <code>arrayinfo</code> возвращает для таких функций список сохраненных элементов, а
функция <code>listarray</code> возвращает сохраненные значения. 
Функции <code>dispfun</code> и <code>fundef</code> возвращают определения функций-массива.
</p>
<p>Функция <code>arraymake</code> создает вызов функции-массива, аналогично тому как
<code>funmake</code> делает для обычных функций.
Функция <code>arrayapply</code> применяет функцию-массив к аргументам, аналогично тому
как <code>apply</code> делает для обычных функций.
Не существует полного аналога функции <code>map</code> для функций-массивов, но
<code>map(lambda([<var>x</var>], <var>a</var>[<var>x</var>]), <var>L</var>)</code> или 
<code>makelist(<var>a</var>[<var>x</var>], <var>x</var>, <var>L</var>)</code>, где <var>L</var> &ndash; список,
действует очень похоже.
</p>
<p>Функция <code>remarray</code> удаляет определение функции-массива (включая сохраненные значения),
аналогично тому как <code>remfunction</code> делает для обычных функций.
</p>
<p>Вызов <code>kill(<var>a</var>[<var>x</var>])</code> удаляет сохраненное значение функции-массива <var>a</var>
для аргумента <var>x</var>. При следующем вызове <var>a</var> с аргументом <var>x</var>, функция
будет перевычислена.
Не существует способа сразу удалить все сохраненные значения функции-массива кроме как
вызов <code>kill(<var>a</var>)</code> или <code>remarray(<var>a</var>)</code>, что также удаляет определение
функции.
</p>
<a name="Item_003a-Function_002fnode_002f_041c_0430_043a_0440_043e_0441_044b"></a><hr>
<div class="header">
<p>
Next: <a href="maxima_143.html#g_t_041c_0430_043a_0440_043e_0441_044b" accesskey="n" rel="next">Макросы</a>, Previous: <a href="maxima_141.html#g_t_0412_0432_0435_0434_0435_043d_0438_0435-_0432-_043e_043f_0440_0435_0434_0435_043b_0435_043d_0438_0435-_0444_0443_043d_043a_0446_0438_0439" accesskey="p" rel="previous">Введение в определение функций</a>, Up: <a href="maxima_140.html#g_t_041e_043f_0440_0435_0434_0435_043b_0435_043d_0438_0435-_0444_0443_043d_043a_0446_0438_0439" accesskey="u" rel="up">Определение функций</a> &nbsp; [<a href="maxima_toc.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="maxima_262.html#g_t_0423_043a_0430_0437_0430_0442_0435_043b_044c-_0444_0443_043d_043a_0446_0438_0439-_0438-_043f_0435_0440_0435_043c_0435_043d_043d_044b_0445" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
