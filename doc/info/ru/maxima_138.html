<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 5.1, http://www.gnu.org/software/texinfo/ -->
<head>
<title>Maxima Manual: Введение в работу с множествами</title>

<meta name="description" content="Maxima Manual: Введение в работу с множествами">
<meta name="keywords" content="Maxima Manual: Введение в работу с множествами">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link href="maxima_toc.html#Top" rel="start" title="Top">
<link href="maxima_262.html#g_t_0423_043a_0430_0437_0430_0442_0435_043b_044c-_0444_0443_043d_043a_0446_0438_0439-_0438-_043f_0435_0440_0435_043c_0435_043d_043d_044b_0445" rel="index" title="Указатель функций и переменных">
<link href="maxima_toc.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="maxima_137.html#g_t_041c_043d_043e_0436_0435_0441_0442_0432_0430" rel="up" title="Множества">
<link href="maxima_139.html#g_t_0424_0443_043d_043a_0446_0438_0438-_0438-_043f_0435_0440_0435_043c_0435_043d_043d_044b_0435-_0434_043b_044f-_0440_0430_0431_043e_0442_044b-_0441-_043c_043d_043e_0436_0435_0441_0442_0432_0430_043c_0438" rel="next" title="Функции и переменные для работы с множествами">
<link href="maxima_137.html#g_t_041c_043d_043e_0436_0435_0441_0442_0432_0430" rel="previous" title="Множества">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.indentedblock {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smallindentedblock {margin-left: 3.2em; font-size: smaller}
div.smalllisp {margin-left: 3.2em}
kbd {font-style:oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nocodebreak {white-space:nowrap}
span.nolinebreak {white-space:nowrap}
span.roman {font-family:serif; font-weight:normal}
span.sansserif {font-family:sans-serif; font-weight:normal}
ul.no-bullet {list-style: none}
body {color: black; background: white;  margin-left: 8%; margin-right: 13%;
      font-family: "FreeSans", sans-serif}
h1 {font-size: 150%; font-family: "FreeSans", sans-serif}
h2 {font-size: 125%; font-family: "FreeSans", sans-serif}
h3 {font-size: 100%; font-family: "FreeSans", sans-serif}
a[href] {color: rgb(0,0,255); text-decoration: none;}
a[href]:hover {background: rgb(220,220,220);}
div.textbox {border: solid; border-width: thin; padding-top: 1em;
    padding-bottom: 1em; padding-left: 2em; padding-right: 2em}
div.titlebox {border: none; padding-top: 1em; padding-bottom: 1em;
    padding-left: 2em; padding-right: 2em; background: rgb(200,255,255);
    font-family: sans-serif}
div.synopsisbox {
    border: none; padding-top: 1em; padding-bottom: 1em; padding-left: 2em;
    padding-right: 2em; background: rgb(255,220,255);}
pre.example {border: 1px solid rgb(180,180,180); padding-top: 1em;
    padding-bottom: 1em; padding-left: 1em; padding-right: 1em;
    background-color: rgb(238,238,255)}
div.spacerbox {border: none; padding-top: 2em; padding-bottom: 2em}
div.image {margin: 0; padding: 1em; text-align: center}
div.categorybox {border: 1px solid gray; padding-top: 1em; padding-bottom: 1em;
    padding-left: 1em; padding-right: 1em; background: rgb(247,242,220)}
img {max-width:80%; max-height: 80%; display: block; margin-left: auto; margin-right: auto}

-->
</style>

<link rel="icon" href="figures/favicon.ico">

</head>

<body lang="ru" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">
<a name="g_t_0412_0432_0435_0434_0435_043d_0438_0435-_0432-_0440_0430_0431_043e_0442_0443-_0441-_043c_043d_043e_0436_0435_0441_0442_0432_0430_043c_0438"></a>
<div class="header">
<p>
Next: <a href="maxima_139.html#g_t_0424_0443_043d_043a_0446_0438_0438-_0438-_043f_0435_0440_0435_043c_0435_043d_043d_044b_0435-_0434_043b_044f-_0440_0430_0431_043e_0442_044b-_0441-_043c_043d_043e_0436_0435_0441_0442_0432_0430_043c_0438" accesskey="n" rel="next">Функции и переменные для работы с множествами</a>, Previous: <a href="maxima_137.html#g_t_041c_043d_043e_0436_0435_0441_0442_0432_0430" accesskey="p" rel="previous">Множества</a>, Up: <a href="maxima_137.html#g_t_041c_043d_043e_0436_0435_0441_0442_0432_0430" accesskey="u" rel="up">Множества</a> &nbsp; [<a href="maxima_toc.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="maxima_262.html#g_t_0423_043a_0430_0437_0430_0442_0435_043b_044c-_0444_0443_043d_043a_0446_0438_0439-_0438-_043f_0435_0440_0435_043c_0435_043d_043d_044b_0445" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Vvedenie-v-rabotu-s-mnozhestvami"></a>
<h3 class="section">36.1 Введение в работу с множествами</h3>

<p>Maxima предоставляет функции, такие как пересечение или объединение,
для работы с конечными множествами, определяемыми перечислением элементов.
Maxima трактует списки и множества как различные объекты.
Это позволяет работать с множествами, элементами которых сами
могут быть списками или множествами.
</p>
<p>В дополнение к функциям для работы конечными множествами Maxima определяет некоторые
функции, относящиеся к комбинаторике, что включает: числа Стирлинга первого и второго рода,
числа Белла, мультиномиальные коэффициенты, разбиения неотрицательных целых чисел и
некоторые другие.
Maxima также определяет дельта-функцию Кронекера.
</p>
<a name="Ispolxzovanie"></a>
<h4 class="subsection">36.1.1 Использование</h4>

<p>Для того, чтобы задать множество с элементами <code>a_1, ..., a_n</code>, следует написать
<code>set(a_1, ..., a_n)</code> или <code>{a_1, ..., a_n}</code>;
для пустого множества надо написать <code>set()</code> или <code>{}</code>.
При вводе формы <code>set(...)</code> и <code>{ ... }</code> эквивалентны.
При выводе множества всегда печатаются с фигурными скобками.
</p>
<p>Если элемент множества присутствует более одного раза, то упрощение
удалит повторяющиеся элементы.
</p>
<div class="example">
<pre class="example">(%i1) set();
(%o1)                          {}
(%i2) set(a, b, a);
(%o2)                        {a, b}
(%i3) set(a, set(b));
(%o3)                       {a, {b}}
(%i4) set(a, [b]);
(%o4)                       {a, [b]}
(%i5) {};
(%o5)                          {}
(%i6) {a, b, a};
(%o6)                        {a, b}
(%i7) {a, {b}};
(%o7)                       {a, {b}}
(%i8) {a, [b]};
(%o8)                       {a, [b]}
</pre></div>

<p>Два элемента <var>x</var> и <var>y</var> являются повторяющимися 
(т.е. рассматриваются совпадающими с точки зрения включения в множество),
тогда и только тогда, когда <code>is(<var>x</var> = <var>y</var>)</code> дает <code>true</code>.
Заметим, что <code>is(equal(<var>x</var>, <var>y</var>))</code> может давать <code>true</code>,
тогда как <code>is(<var>x</var> = <var>y</var>)</code> дает <code>false</code>.
В этом случае элементы <var>x</var> и <var>y</var> считаются различными.
</p>
<div class="example">
<pre class="example">(%i1) x: a/c + b/c;
                              b   a
(%o1)                         - + -
                              c   c
(%i2) y: a/c + b/c;
                              b   a
(%o2)                         - + -
                              c   c
(%i3) z: (a + b)/c;
                              b + a
(%o3)                         -----
                                c
(%i4) is (x = y);
(%o4)                         true
(%i5) is (y = z);
(%o5)                         false
(%i6) is (equal (y, z));
(%o6)                         true
(%i7) y - z;
                           b + a   b   a
(%o7)                    - ----- + - + -
                             c     c   c
(%i8) ratsimp (%);
(%o8)                           0
(%i9) {x, y, z};
                          b + a  b   a
(%o9)                    {-----, - + -}
                            c    c   c
</pre></div>

<p>Для того, чтобы создать множество из элементов списка, используется <code>setify</code>.
</p>
<div class="example">
<pre class="example">(%i1) setify ([b, a]);
(%o1)                        {a, b}
</pre></div>

<p>Элементы множества <code>x</code> и <code>y</code> равны если <code>is(x = y)</code>
вычисляется в <code>true</code>. Тогда <code>rat(x)</code> и <code>x</code> являются равными элементами множества, и,
следовательно 
</p>
<div class="example">
<pre class="example">(%i1) {x, rat(x)};
(%o1)                          {x}
</pre></div>

<p>Далее, поскольку <code>is((x - 1)*(x + 1) = x^2 - 1)</code> вычисляется в <code>false</code>, то
<code>(x - 1)*(x + 1)</code> и <code>x^2 - 1</code> есть различные элементы, и  
</p>
<div class="example">
<pre class="example">(%i1) {(x - 1)*(x + 1), x^2 - 1};
                                       2
(%o1)               {(x - 1) (x + 1), x  - 1}
</pre></div>

<p>Для приведения этого множества к одноэлементному следует применить <code>rat</code> 
к каждому элементу:
</p>
<div class="example">
<pre class="example">(%i1) {(x - 1)*(x + 1), x^2 - 1};
                                       2
(%o1)               {(x - 1) (x + 1), x  - 1}
(%i2) map (rat, %);
                              2
(%o2)/R/                    {x  - 1}
</pre></div>

<p>Для удаления повторов из множеств другого вида может потребоваться
применение других упрощающих функций. Вот пример, использующий <code>trigsimp</code>:
</p>
<div class="example">
<pre class="example">(%i1) {1, cos(x)^2 + sin(x)^2};
                            2         2
(%o1)                {1, sin (x) + cos (x)}
(%i2) map (trigsimp, %);
(%o2)                          {1}
</pre></div>

<p>Множество является упрощенным, если его элементы не повторяются и упорядочены. 
Текущая реализация Maxima функций для работы с множествами использует
функцию <code>orderlessp</code> для упорядочения, однако <i>будущие версии могут использовать
другую упорядочивающую функцию</i>.
</p>
<p>Некоторые операции над множествами, такие как подстановки, вызывают автоматическое 
упрощение.  Например,
</p>
<div class="example">
<pre class="example">(%i1) s: {a, b, c}$
(%i2) subst (c=a, s);
(%o2)                        {a, b}
(%i3) subst ([a=x, b=x, c=x], s);
(%o3)                          {x}
(%i4) map (lambda ([x], x^2), set (-1, 0, 1));
(%o4)                        {0, 1}
</pre></div>

<p>Maxima рассматривает списки и множества как различные объекты;
функции, подобные <code>union</code> и <code>intersection</code>, сигнализируют об ошибке
если их аргументы не являются множествами. Если необходимо применить функцию
для работы с множествами к списку, то надо сначала использовать <code>setify</code> 
для преобразования списка в множество. Таким образом
</p>
<div class="example">
<pre class="example">(%i1) union ([1, 2], {a, b});
Function union expects a set, instead found [1,2]
 -- an error.  Quitting.  To debug this try debugmode(true);
(%i2) union (setify ([1, 2]), {a, b});
(%o2)                     {1, 2, a, b}
</pre></div>

<p>Для того, чтобы получить все элементы множества <code>s</code>, удовлетворяющие предикату
<code>f</code>, используйте <code>subset(s, f)</code> (<i>предикат</i> &ndash; функция, дающая логическое 
значение). Например, чтобы найти в заданном множестве уравнения, которые не зависят от
переменной <code>z</code>, используйте
</p>
<div class="example">
<pre class="example">(%i1) subset ({x + y + z, x - y + 4, x + y - 5},
                                    lambda ([e], freeof (z, e)));
(%o1)               {- y + x + 4, y + x - 5}
</pre></div>

<p>Раздел <a href="maxima_139.html#g_t_0424_0443_043d_043a_0446_0438_0438-_0438-_043f_0435_0440_0435_043c_0435_043d_043d_044b_0435-_0434_043b_044f-_0440_0430_0431_043e_0442_044b-_0441-_043c_043d_043e_0436_0435_0441_0442_0432_0430_043c_0438">Функции и переменные для работы с множествами</a> содержит полный список
функций Maxima, предназначенных для работы с множествами.
</p>
<div class=categorybox>
Категории:<a href="maxima_263.html#Category_003a-_041c_043d_043e_0436_0435_0441_0442_0432_0430">Множества</a>
&middot;</div>
<a name="Iteraciya-po-elementam-mnozhestva"></a>
<h4 class="subsection">36.1.2 Итерация по элементам множества</h4>

<p>Существует два способа организации цикла по элементам множества. Один способ &ndash; использовать <code>map</code>,
например:
</p>
<div class="example">
<pre class="example">(%i1) map (f, {a, b, c});
(%o1)                  {f(a), f(b), f(c)}
</pre></div>

<p>Другой способ &ndash; использовать <code>for <var>x</var> in <var>s</var> do</code>
</p>
<div class="example">
<pre class="example">(%i1) s: {a, b, c};
(%o1)                       {a, b, c}
(%i2) for si in s do print (concat (si, 1));
a1 
b1 
c1 
(%o2)                         done
</pre></div>

<p>Maxima функции <code>first</code> и <code>rest</code> правильно работают с множествами.
Примененная к множеству, <code>first</code> возвращает первый элемент множества,
какой именно &ndash; может зависеть от реализации. Если <code>s</code> является множеством, 
то <code>rest(s)</code> эквивалентно <code>disjoin(first(s), s)</code>.
В настоящий момент есть другие функции Maxima, корректно работающие с множествами.
В будущих версиях функции <code>first</code> и <code>rest</code> могут работать на множествах иначе или
не работать вовсе.
</p>
<a name="Oshibki"></a>
<h4 class="subsection">36.1.3 Ошибки</h4>

<p>Функции для работы с множествами используют Maxima функцию <code>orderlessp</code> 
для сортировки элементов множества и Lisp функцию <code>like</code> для проверки
равенства элементов. Обе эти функции имеют известные ошибки, которые проявляются при 
попытке использовать множества, элементы которых являются списками или матрицами,
включающими выражения в канонической рациональной форме (КРВ).
Например
</p>
<div class="example">
<pre class="example">(%i1) {[x], [rat (x)]};
Maxima encountered a Lisp error:

  The value #:X1440 is not of type LIST.

Automatically continuing.
To reenable the Lisp debugger set *debugger-hook* to nil.
</pre></div>

<p>Это выражение вызывает ошибку (сообщение об ошибке зависит от версии Lisp и Maxima). 
Другой пример
</p>
<div class="example">
<pre class="example">(%i1) setify ([[rat(a)], [rat(b)]]);
Maxima encountered a Lisp error:

  The value #:A1440 is not of type LIST.

Automatically continuing.
To reenable the Lisp debugger set *debugger-hook* to nil.
</pre></div>

<p>Эти ошибки вызваны ошибками в <code>orderlessp</code> и <code>like</code>, а не ошибками
в реализации функций работы с множествами. 
Для иллюстрации попробуем следующие выражения
</p>
<div class="example">
<pre class="example">(%i1) orderlessp ([rat(a)], [rat(b)]);
Maxima encountered a Lisp error:

  The value #:B1441 is not of type LIST.

Automatically continuing.
To reenable the Lisp debugger set *debugger-hook* to nil.
(%i2) is ([rat(a)] = [rat(a)]);
(%o2)                         false
</pre></div>

<p>До тех пор, пока эти ошибки не исправлены, не следует использовать множества
с элементами в виде списков и матриц, содержащих выражения в формате КРВ.
Множества, просто содержащие выражения КРВ в качестве элементов,
не создают проблем.
</p>
<div class="example">
<pre class="example">(%i1) {x, rat (x)};
(%o1)                          {x}
</pre></div>

<p>Maxima функция <code>orderlessp</code> имеет еще одну ошибку, которая может создать проблемы
при работе с множествами.  А именно, упорядочивающий предикат <code>orderlessp</code> не
является транзитивным. Простейший известный пример, демонстрирующий это 
</p>
<div class="example">
<pre class="example">(%i1) q: x^2$
(%i2) r: (x + 1)^2$
(%i3) s: x*(x + 2)$
(%i4) orderlessp (q, r);
(%o4)                         true
(%i5) orderlessp (r, s);
(%o5)                         true
(%i6) orderlessp (q, s);
(%o6)                         false
</pre></div>

<p>Эта ошибка вызывает проблемы со всеми функциями для работы с множествами и даже 
с другими функциями Maxima. Возможно, но точно не известно, что эту ошибку можно обойти, если все элементы
множества или являются КРВ, или упрощены с помощью <code>ratsimp</code>.
</p>
<p>Механизмы Maxima <code>orderless</code> и <code>ordergreat</code> не совместимы с функциями для работы с множествами. 
Если требуется использовать либо <code>orderless</code>, либо <code>ordergreat</code>, 
то следует вызывать эти функции до формирования множеств, и не следует использовать <code>unorder</code>. 
</p>

<p>Если вы встретите что-то, что может быть ошибкой в функциях работы с множествами, пожалуйста,
сообщите об этом в базу данных ошибок Maxima. См. <code>bug_report</code>.
</p>
<a name="Avtory"></a>
<h4 class="subsection">36.1.4 Авторы</h4>

<p>Функции для работы с множествами Maxima и документация к ним написаны Ставросом Макракисом 
(Stavros Macrakis of Cambridge, Massachusetts) и Бартоном Уиллисом (Barton Willis of the
University of Nebraska at Kearney (UNK)). 
</p>
<a name="Item_003a-nset_002fnode_002f_0424_0443_043d_043a_0446_0438_0438-_0438-_043f_0435_0440_0435_043c_0435_043d_043d_044b_0435-_0434_043b_044f-_0440_0430_0431_043e_0442_044b-_0441-_043c_043d_043e_0436_0435_0441_0442_0432_0430_043c_0438"></a><hr>
<div class="header">
<p>
Next: <a href="maxima_139.html#g_t_0424_0443_043d_043a_0446_0438_0438-_0438-_043f_0435_0440_0435_043c_0435_043d_043d_044b_0435-_0434_043b_044f-_0440_0430_0431_043e_0442_044b-_0441-_043c_043d_043e_0436_0435_0441_0442_0432_0430_043c_0438" accesskey="n" rel="next">Функции и переменные для работы с множествами</a>, Previous: <a href="maxima_137.html#g_t_041c_043d_043e_0436_0435_0441_0442_0432_0430" accesskey="p" rel="previous">Множества</a>, Up: <a href="maxima_137.html#g_t_041c_043d_043e_0436_0435_0441_0442_0432_0430" accesskey="u" rel="up">Множества</a> &nbsp; [<a href="maxima_toc.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="maxima_262.html#g_t_0423_043a_0430_0437_0430_0442_0435_043b_044c-_0444_0443_043d_043a_0446_0438_0439-_0438-_043f_0435_0440_0435_043c_0435_043d_043d_044b_0445" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
