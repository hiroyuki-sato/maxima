<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 5.1, http://www.gnu.org/software/texinfo/ -->
<head>
<title>Maxima Manual: Функции и переменные для работы с массивами</title>

<meta name="description" content="Maxima Manual: Функции и переменные для работы с массивами">
<meta name="keywords" content="Maxima Manual: Функции и переменные для работы с массивами">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link href="maxima_toc.html#Top" rel="start" title="Top">
<link href="maxima_262.html#g_t_0423_043a_0430_0437_0430_0442_0435_043b_044c-_0444_0443_043d_043a_0446_0438_0439-_0438-_043f_0435_0440_0435_043c_0435_043d_043d_044b_0445" rel="index" title="Указатель функций и переменных">
<link href="maxima_toc.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="maxima_88.html#g_t_041c_0430_0441_0441_0438_0432_044b" rel="up" title="Массивы">
<link href="maxima_90.html#Matrices-and-Linear-Algebra" rel="next" title="Matrices and Linear Algebra">
<link href="maxima_88.html#g_t_041c_0430_0441_0441_0438_0432_044b" rel="previous" title="Массивы">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.indentedblock {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smallindentedblock {margin-left: 3.2em; font-size: smaller}
div.smalllisp {margin-left: 3.2em}
kbd {font-style:oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nocodebreak {white-space:nowrap}
span.nolinebreak {white-space:nowrap}
span.roman {font-family:serif; font-weight:normal}
span.sansserif {font-family:sans-serif; font-weight:normal}
ul.no-bullet {list-style: none}
body {color: black; background: white;  margin-left: 8%; margin-right: 13%;
      font-family: "FreeSans", sans-serif}
h1 {font-size: 150%; font-family: "FreeSans", sans-serif}
h2 {font-size: 125%; font-family: "FreeSans", sans-serif}
h3 {font-size: 100%; font-family: "FreeSans", sans-serif}
a[href] {color: rgb(0,0,255); text-decoration: none;}
a[href]:hover {background: rgb(220,220,220);}
div.textbox {border: solid; border-width: thin; padding-top: 1em;
    padding-bottom: 1em; padding-left: 2em; padding-right: 2em}
div.titlebox {border: none; padding-top: 1em; padding-bottom: 1em;
    padding-left: 2em; padding-right: 2em; background: rgb(200,255,255);
    font-family: sans-serif}
div.synopsisbox {
    border: none; padding-top: 1em; padding-bottom: 1em; padding-left: 2em;
    padding-right: 2em; background: rgb(255,220,255);}
pre.example {border: 1px solid rgb(180,180,180); padding-top: 1em;
    padding-bottom: 1em; padding-left: 1em; padding-right: 1em;
    background-color: rgb(238,238,255)}
div.spacerbox {border: none; padding-top: 2em; padding-bottom: 2em}
div.image {margin: 0; padding: 1em; text-align: center}
div.categorybox {border: 1px solid gray; padding-top: 1em; padding-bottom: 1em;
    padding-left: 1em; padding-right: 1em; background: rgb(247,242,220)}
img {max-width:80%; max-height: 80%; display: block; margin-left: auto; margin-right: auto}

-->
</style>

<link rel="icon" href="figures/favicon.ico">

</head>

<body lang="ru" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">
<a name="g_t_0424_0443_043d_043a_0446_0438_0438-_0438-_043f_0435_0440_0435_043c_0435_043d_043d_044b_0435-_0434_043b_044f-_0440_0430_0431_043e_0442_044b-_0441-_043c_0430_0441_0441_0438_0432_0430_043c_0438"></a>
<div class="header">
<p>
Previous: <a href="maxima_88.html#g_t_041c_0430_0441_0441_0438_0432_044b" accesskey="p" rel="previous">Массивы</a>, Up: <a href="maxima_88.html#g_t_041c_0430_0441_0441_0438_0432_044b" accesskey="u" rel="up">Массивы</a> &nbsp; [<a href="maxima_toc.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="maxima_262.html#g_t_0423_043a_0430_0437_0430_0442_0435_043b_044c-_0444_0443_043d_043a_0446_0438_0439-_0438-_043f_0435_0440_0435_043c_0435_043d_043d_044b_0445" title="Index" rel="index">Index</a>]</p>
</div>
<a name="Funkcii-i-peremennye-dlya-raboty-s-massivami"></a>
<h3 class="section">22.1 Функции и переменные для работы с массивами</h3>

<a name="Item_003a-Arrays_002fdeffn_002farray"></a><dl>
<dt><a name="index-array"></a>Функция: <strong>array</strong> <em>(<var>name</var>, <var>dim_1</var>, ..., <var>dim_n</var>)</em></dt>
<dt><a name="index-array-1"></a>Функция: <strong>array</strong> <em>(<var>name</var>, <var>type</var>, <var>dim_1</var>, ..., <var>dim_n</var>)</em></dt>
<dt><a name="index-array-2"></a>Функция: <strong>array</strong> <em>([<var>name_1</var>, ..., <var>name_m</var>], <var>dim_1</var>, ..., <var>dim_n</var>)</em></dt>
<dd>
<p>Создает <em>n</em>-мерный массив.
Значение <em>n</em> должно быть меньше или равно 5.
<em>i</em>-й индекс может принимать целочисленное значение от
0 до <var>dim_i</var>.
</p>
<p><code>array (<var>name</var>, <var>dim_1</var>, ..., <var>dim_n</var>)</code> &ndash; создает
массив общего вида.
</p>
<p><code>array (<var>name</var>, <var>type</var>, <var>dim_1</var>, ..., <var>dim_n</var>)</code>
&ndash; создает массив, элементы которого имеют определенный тип.
<var>type</var> может быть <code>fixnum</code> для целых чисел ограниченной
точности и <code>flonum</code> для чисел с плавающей точкой.
</p>
<p><code>array ([<var>name_1</var>, ..., <var>name_m</var>], <var>dim_1</var>, ..., <var>dim_n</var>)</code>
&ndash; создает  <em>m</em> массивов одинаковой размерности.
</p>
<p>Если пользователь присваивает значение переменной с индексом
до того, как соответствующий массив объявлен, тогда создается
необъявленный массив.  Необъявленные массивы, также известные как
хеш-массивы (т.к. для хранения элементов применяется
хеширование), являются более общими чем объявленные массивы.
Пользователь не определяет их максимальный размер, и они
растут динамически по мере присваивания значений их элементам.
Индексы необъявленных массивов даже не обязаны быть целочисленными.
Однако, за исключением случая когда массив сильно разряжен,
объявленный массив, обычно, более эффективен чем необъявленный.
Функция <code>array</code> может преобразовать необъявленный массив
в объявленный.
</p>
<div class=categorybox>
Категории:<a href="maxima_263.html#Category_003a-_041c_0430_0441_0441_0438_0432_044b">Массивы</a>
&middot;</div>
</dd></dl>

<a name="Item_003a-Arrays_002fdeffn_002farrayapply"></a><dl>
<dt><a name="index-arrayapply"></a>Функция: <strong>arrayapply</strong> <em>(<var>A</var>, [<var>i_1</var>, ..., <var>i_n</var>])</em></dt>
<dd><p>Вычисляет значение <code><var>A</var> [<var>i_1</var>, ..., <var>i_n</var>]</code>,
где  <var>A</var> &ndash; массив, а <var>i_1</var>, ..., <var>i_n</var> целые числа.
</p>
<p>Данная функция похожа на <code>apply</code>, только первый аргумент является
массивом а не функцией.
</p>
<div class=categorybox>
Категории:<a href="maxima_263.html#Category_003a-_0412_044b_0440_0430_0436_0435_043d_0438_044f">Выражения</a>
&middot;<a href="maxima_263.html#Category_003a-_041c_0430_0441_0441_0438_0432_044b">Массивы</a>
&middot;</div>
</dd></dl>

<a name="Item_003a-Arrays_002fdeffn_002farrayinfo"></a><dl>
<dt><a name="index-arrayinfo"></a>Функция: <strong>arrayinfo</strong> <em>(<var>A</var>)</em></dt>
<dd><p>Возвращает информацию о массиве <var>A</var>.
Аргумент <var>A</var> может быть объявленным массивом, необъявленным (хеш-) массивом,
функцией-массивом или функцией с индексом.
</p>
<p>Для объявленного массива <code>arrayinfo</code> возвращает список состоящий из
атома <code>declared</code>, размерности массива и размера каждого из измерений.
Элементы массива, как имеющие значение, так и не имеющие значения,
возвращаются функцией <code>listarray</code>.
</p>
<p>Для необъявленных массивов (хеш-массивов) <code>arrayinfo</code> 
возвращает список состоящий из атома <code>hashed</code>, числа индексов и 
индексов всех элементов, которые имеют значение.
Значения массива возвращаются функцией <code>listarray</code>.
</p>
<p>Для функций-массивов
<code>arrayinfo</code> возвращает список состоящий из атома <code>hashed</code>, числа индексов и
индексов всех элементов, которые содержат функциональные значения.
Функциональные значения возвращаются функцией <code>listarray</code>.
</p>
<p>Для функций с индексом
<code>arrayinfo</code> возвращает список состоящий из атома <code>hashed</code>, числа индексов и
индексов всех элементов, которые содержат лямбда-выражения.
Лямбда-выражения возвращаются функцией <code>listarray</code>.
</p>
<p>Примеры:
</p>
<p><code>arrayinfo</code> и <code>listarray</code> примененные к объявленному массиву.
</p>
<div class="example">
<pre class="example">(%i1) array (aa, 2, 3);
(%o1)                          aa
(%i2) aa [2, 3] : %pi;
(%o2)                          %pi
(%i3) aa [1, 2] : %e;
(%o3)                          %e
(%i4) arrayinfo (aa);
(%o4)                 [declared, 2, [2, 3]]
(%i5) listarray (aa);
(%o5) [#####, #####, #####, #####, #####, #####, %e, #####, 
                                        #####, #####, #####, %pi]
</pre></div>

<p><code>arrayinfo</code> и <code>listarray</code> примененные к необъявленному (хеш) массиву.
</p>
<div class="example">
<pre class="example">(%i1) bb [FOO] : (a + b)^2;
                                   2
(%o1)                       (b + a)
(%i2) bb [BAR] : (c - d)^3;
                                   3
(%o2)                       (c - d)
(%i3) arrayinfo (bb);
(%o3)               [hashed, 1, [BAR], [FOO]]
(%i4) listarray (bb);
                              3         2
(%o4)                 [(c - d) , (b + a) ]
</pre></div>

<p><code>arrayinfo</code> и <code>listarray</code> примененные к функции-массиву.
</p>
<div class="example">
<pre class="example">(%i1) cc [x, y] := y / x;
                                     y
(%o1)                      cc     := -
                             x, y    x
(%i2) cc [u, v];
                                v
(%o2)                           -
                                u
(%i3) cc [4, z];
                                z
(%o3)                           -
                                4
(%i4) arrayinfo (cc);
(%o4)              [hashed, 2, [4, z], [u, v]]
(%i5) listarray (cc);
                              z  v
(%o5)                        [-, -]
                              4  u
</pre></div>

<p><code>arrayinfo</code> и <code>listarray</code> примененные к функции с индексом.
</p>
<div class="example">
<pre class="example">(%i1) dd [x] (y) := y ^ x;
                                     x
(%o1)                     dd (y) := y
                            x
(%i2) dd [a + b];
                                    b + a
(%o2)                  lambda([y], y     )
(%i3) dd [v - u];
                                    v - u
(%o3)                  lambda([y], y     )
(%i4) arrayinfo (dd);
(%o4)             [hashed, 1, [b + a], [v - u]]
(%i5) listarray (dd);
                         b + a                v - u
(%o5)      [lambda([y], y     ), lambda([y], y     )]
</pre></div>

<div class=categorybox>
Категории:<a href="maxima_263.html#Category_003a-_041c_0430_0441_0441_0438_0432_044b">Массивы</a>
&middot;</div>
</dd></dl>

<a name="Item_003a-Arrays_002fdeffn_002farraymake"></a><dl>
<dt><a name="index-arraymake"></a>Функция: <strong>arraymake</strong> <em>(<var>A</var>, [<var>i_1</var>, ..., <var>i_n</var>])</em></dt>
<dd><p>Возвращает выражение <code><var>A</var>[<var>i_1</var>, ..., <var>i_n</var>]</code>.
Этот результат является не вычисленной ссылкой на элемент
массива.
</p>
<p>Функция <code>arraymake</code> похожа на <code>funmake</code>,
за исключеним того, что возвращает не вычисленный элемент массива
вместо от не вычисленного вызова функции.
</p>
<p>Примеры:
</p>
<div class="example">
<pre class="example">(%i1) arraymake (A, [1]);
(%o1)                          A
                                1
(%i2) arraymake (A, [k]);
(%o2)                          A
                                k
(%i3) arraymake (A, [i, j, 3]);
(%o3)                       A
                             i, j, 3
(%i4) array (A, fixnum, 10);
(%o4)                           A
(%i5) fillarray (A, makelist (i^2, i, 1, 11));
(%o5)                           A
(%i6) arraymake (A, [5]); 
(%o6)                          A
                                5
(%i7) ''%;
(%o7)                          36
(%i8) L : [a, b, c, d, e];
(%o8)                    [a, b, c, d, e]
(%i9) arraymake ('L, [n]);
(%o9)                          L
                                n
(%i10) ''%, n = 3;
(%o10)                          c
(%i11) A2 : make_array (fixnum, 10);
(%o11)          {Array:  #(0 0 0 0 0 0 0 0 0 0)}
(%i12) fillarray (A2, [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]);
(%o12)          {Array:  #(1 2 3 4 5 6 7 8 9 10)}
(%i13) arraymake ('A2, [8]);
(%o13)                         A2
                                 8
(%i14) ''%;
(%o14)                          9
</pre></div>

<div class=categorybox>
Категории:<a href="maxima_263.html#Category_003a-_0412_044b_0440_0430_0436_0435_043d_0438_044f">Выражения</a>
&middot;<a href="maxima_263.html#Category_003a-_041c_0430_0441_0441_0438_0432_044b">Массивы</a>
&middot;</div>
</dd></dl>

<a name="Item_003a-Arrays_002fdefvr_002farrays"></a><dl>
<dt><a name="index-arrays"></a>Системная переменная: <strong>arrays</strong></dt>
<dd><p>Значение по умолчанию: <code>[]</code>
</p>
<p>Список <code>arrays</code> содержит всех существующих массивов.
Что составляет: массивы, объявленные при помощи <code>array</code>;
хеш-массивы, созданные при помощи неявных определение (присваиванием чего-либо элементу массива);
функции-массивы, определенные с помощью <code>:=</code> и <code>define</code>.
Массивы, созданные при помощи <code>make_array</code>, в список не включаются.
</p>
<p>См. также
<code>array</code>, <code>arrayapply</code>, <code>arrayinfo</code>, <code>arraymake</code>, 
<code>fillarray</code>, <code>listarray</code>, and <code>rearray</code>.
</p>
<p>Примеры:
</p>
<div class="example">
<pre class="example">(%i1) array (aa, 5, 7);
(%o1)                          aa
(%i2) bb [FOO] : (a + b)^2;
                                   2
(%o2)                       (b + a)
(%i3) cc [x] := x/100;
                                   x
(%o3)                      cc  := ---
                             x    100
(%i4) dd : make_array ('any, 7);
(%o4)       {Array:  #(NIL NIL NIL NIL NIL NIL NIL)}
(%i5) arrays;
(%o5)                     [aa, bb, cc]
</pre></div>

<div class=categorybox>
Категории:<a href="maxima_263.html#Category_003a-_041c_0430_0441_0441_0438_0432_044b">Массивы</a>
&middot;<a href="maxima_263.html#Category_003a-_0413_043b_043e_0431_0430_043b_044c_043d_044b_0435-_043f_0435_0440_0435_043c_0435_043d_043d_044b_0435">Глобальные переменные</a>
&middot;</div>
</dd></dl>

<a name="Item_003a-Arrays_002fdeffn_002fbashindices"></a><dl>
<dt><a name="index-bashindices"></a>Функция: <strong>bashindices</strong> <em>(<var>expr</var>)</em></dt>
<dd><p>Преобразует выражение <var>expr</var> присваивая каждому суммированию или
произведению уникальный индекс.  Индекс имеет форму
<code>j<var>number</var></code>.  Величина <var>number</var> определяется
значением переменной <code>gensumnum</code>, которое может быть установлено
пользователем.  Например <code>gensumnum:0$</code>, инициализирует
эту переменную.
</p>
<div class=categorybox>
Категории:<a href="maxima_263.html#Category_003a-_0421_0443_043c_043c_044b-_0438-_043f_0440_043e_0438_0437_0432_0435_0434_0435_043d_0438_044f">Суммы и произведения</a>
&middot;</div>
</dd></dl>

<a name="Item_003a-Arrays_002fdeffn_002ffillarray"></a><dl>
<dt><a name="index-fillarray"></a>Функция: <strong>fillarray</strong> <em>(<var>A</var>, <var>B</var>)</em></dt>
<dd><p>Заполняет массив <var>A</var> элементами из <var>B</var>, являющимся
списком или массивом.
</p>
<p>Если для массива <var>A</var> в момент создания был задан тип элементов,
то он может быть заполнен только элементами данного типа и
попытка заполнения элементами другого типа является ошибкой.
</p>
<p>Если размерность массивов не совпадает, тогда <var>A</var>
заполняется построчно.  Если число элементов <var>B</var> недостаточно, то
последний элемент используется для заполнения остатка <var>A</var>.
Если число элементов <var>B</var> слишком велико, тогда излишние отбрасываются.
</p>
<p><code>fillarray</code> возвращает свой первый аргумент.
</p>
<p>Примеры:
</p>
<p>Создается массив из 9 элементов и заполняется из списка.
</p>
<div class="example">
<pre class="example">(%i1) array (a1, fixnum, 8);
(%o1)                          a1
(%i2) listarray (a1);
(%o2)              [0, 0, 0, 0, 0, 0, 0, 0, 0]
(%i3) fillarray (a1, [1, 2, 3, 4, 5, 6, 7, 8, 9]);
(%o3)                          a1
(%i4) listarray (a1);
(%o4)              [1, 2, 3, 4, 5, 6, 7, 8, 9]
</pre></div>

<p>Если недостаточно элементов для заполнения массива,
то последний элемент повторяется.
Если элементов слишком много, то излишние элементы
игнорируются.
</p>
<div class="example">
<pre class="example">(%i1) a2 : make_array (fixnum, 8);
(%o1)             {Array:  #(0 0 0 0 0 0 0 0)}
(%i2) fillarray (a2, [1, 2, 3, 4, 5]);
(%o2)             {Array:  #(1 2 3 4 5 5 5 5)}
(%i3) fillarray (a2, [4]);
(%o3)             {Array:  #(4 4 4 4 4 4 4 4)}
(%i4) fillarray (a2, makelist (i, i, 1, 100));
(%o4)             {Array:  #(1 2 3 4 5 6 7 8)}
</pre></div>

<p>Многомерные массивы заполняются построчно.
</p>
<div class="example">
<pre class="example">(%i1) a3 : make_array (fixnum, 2, 5);
(%o1)        {Array:  #2A((0 0 0 0 0) (0 0 0 0 0))}
(%i2) fillarray (a3, [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]);
(%o2)        {Array:  #2A((1 2 3 4 5) (6 7 8 9 10))}
(%i3) a4 : make_array (fixnum, 5, 2);
(%o3)     {Array:  #2A((0 0) (0 0) (0 0) (0 0) (0 0))}
(%i4) fillarray (a4, a3);
(%o4)     {Array:  #2A((1 2) (3 4) (5 6) (7 8) (9 10))}
</pre></div>

<div class=categorybox>
Категории:<a href="maxima_263.html#Category_003a-_041c_0430_0441_0441_0438_0432_044b">Массивы</a>
&middot;</div>
</dd></dl>

<a name="Item_003a-Arrays_002fdeffn_002flistarray"></a><dl>
<dt><a name="index-listarray"></a>Функция: <strong>listarray</strong> <em>(<var>A</var>)</em></dt>
<dd><p>Возвращает список элементов массива <var>A</var>.
Аргумент <var>A</var> должен быть объявленным массивом, необъявленным (хеш) массивом,
функцией-массивом или функцией с индексами.
</p>
<p>Элементы помещаются в список построчно.
Т.е. сначала помещаются элементы по первому индексу, затем по второму и т.д.
Порядок значений индексов тот же, что установлен при помощи <code>orderless</code>.
</p>
<p>Для необъявленных массивов, функций-массивов и функций с индексом,
возвращаются элементы соответствующие индексам возвращаемым
функцией <code>arrayinfo</code>.
</p>
<p>Для объявленных массивов общего типа (т.е не <code>fixnum</code> или <code>flonum</code>) элементы не имеющие значения
возвращаются как <code>#####</code>.
Не присвоенные элементы объявленных <code>fixnum</code> или <code>flonum</code> массивов
возвращаются как 0 или 0.0 соответственно.
Не присвоенные элементы необъявленных массивов, функций-массивов
и функций с индексом не возвращаются.
</p>
<p>Примеры:
</p>
<p><code>listarray</code> и <code>arrayinfo</code> примененные к объявленному массиву.
</p>
<div class="example">
<pre class="example">(%i1) array (aa, 2, 3);
(%o1)                          aa
(%i2) aa [2, 3] : %pi;
(%o2)                          %pi
(%i3) aa [1, 2] : %e;
(%o3)                          %e
(%i4) listarray (aa);
(%o4) [#####, #####, #####, #####, #####, #####, %e, #####, 
                                        #####, #####, #####, %pi]
(%i5) arrayinfo (aa);
(%o5)                 [declared, 2, [2, 3]]
</pre></div>

<p><code>arrayinfo</code> и <code>listarray</code> примененные к необъявленному (хеш) массиву.
</p>
<div class="example">
<pre class="example">(%i1) bb [FOO] : (a + b)^2;
                                   2
(%o1)                       (b + a)
(%i2) bb [BAR] : (c - d)^3;
                                   3
(%o2)                       (c - d)
(%i3) listarray (bb);
                              3         2
(%o3)                 [(c - d) , (b + a) ]
(%i4) arrayinfo (bb);
(%o4)               [hashed, 1, [BAR], [FOO]]
</pre></div>

<p><code>arrayinfo</code> и <code>listarray</code> примененные к функции-массиву.
</p>
<div class="example">
<pre class="example">(%i1) cc [x, y] := y / x;
                                     y
(%o1)                      cc     := -
                             x, y    x
(%i2) cc [u, v];
                                v
(%o2)                           -
                                u
(%i3) cc [4, z];
                                z
(%o3)                           -
                                4
(%i4) listarray (cc);
                              z  v
(%o4)                        [-, -]
                              4  u
(%i5) arrayinfo (cc);
(%o5)              [hashed, 2, [4, z], [u, v]]
</pre></div>

<p><code>arrayinfo</code> и <code>listarray</code> примененные к функции с индексом.
</p>
<div class="example">
<pre class="example">(%i1) dd [x] (y) := y ^ x;
                                     x
(%o1)                     dd (y) := y
                            x
(%i2) dd [a + b];
                                    b + a
(%o2)                  lambda([y], y     )
(%i3) dd [v - u];
                                    v - u
(%o3)                  lambda([y], y     )
(%i4) listarray (dd);
                         b + a                v - u
(%o4)      [lambda([y], y     ), lambda([y], y     )]
(%i5) arrayinfo (dd);
(%o5)             [hashed, 1, [b + a], [v - u]]
</pre></div>

<div class=categorybox>
Категории:<a href="maxima_263.html#Category_003a-_041c_0430_0441_0441_0438_0432_044b">Массивы</a>
&middot;</div>
</dd></dl>

<a name="Item_003a-Arrays_002fdeffn_002fmake_005farray"></a><dl>
<dt><a name="index-make_005farray"></a>Функция: <strong>make_array</strong> <em>(<var>type</var>, <var>dim_1</var>, ..., <var>dim_n</var>)</em></dt>
<dd><p>Создает и возвращает Lisp-массив.  <var>type</var> может быть
<code>any</code>, <code>flonum</code>, <code>fixnum</code>, <code>hashed</code> или
<code>functional</code>.
</p>
<p>Массив имеет <em>n</em> индексов, <em>i</em>-й индекс может принимать
значение от 0 до <em><var>dim_i</var>-1</em>.
</p>
<p>Преимущество <code>make_array</code> по сравнению с <code>array</code> состоит в
том, что возвращаемый Lisp-массив не имеет имени.  И как только ссылка
на него исчезает, занимаемое им место освобождается.
Например, если <code>y: make_array (...)</code>, тогда <code>y</code> ссылается
на объект (массив), занимающий место в памяти.
Но после присваивания <code>y: false</code>, <code>y</code> больше не ссылается
на данный массив и занимаемое им место будет освобождено
при сборке мусора.
</p>

<p>Примеры:
</p>
<div class="example">
<pre class="example">(%i1) A1 : make_array (fixnum, 10);
(%o1)           {Array:  #(0 0 0 0 0 0 0 0 0 0)}
(%i2) A1 [8] : 1729;
(%o2)                         1729
(%i3) A1;
(%o3)          {Array:  #(0 0 0 0 0 0 0 0 1729 0)}
(%i4) A2 : make_array (flonum, 10);
(%o4) {Array:  #(0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0)}
(%i5) A2 [2] : 2.718281828;
(%o5)                      2.718281828
(%i6) A2;
(%o6) 
     {Array:  #(0.0 0.0 2.718281828 0.0 0.0 0.0 0.0 0.0 0.0 0.0)}
(%i7) A3 : make_array (any, 10);
(%o7) {Array:  #(NIL NIL NIL NIL NIL NIL NIL NIL NIL NIL)}
(%i8) A3 [4] : x - y - z;
(%o8)                      - z - y + x
(%i9) A3;
(%o9) {Array:  #(NIL NIL NIL NIL ((MPLUS SIMP) $X ((MTIMES SIMP)\
 -1 $Y) ((MTIMES SIMP) -1 $Z))
  NIL NIL NIL NIL NIL)}
(%i10) A4 : make_array (fixnum, 2, 3, 5);
(%o10) {Array:  #3A(((0 0 0 0 0) (0 0 0 0 0) (0 0 0 0 0)) ((0 0 \
0 0 0) (0 0 0 0 0) (0 0 0 0 0)))}
(%i11) fillarray (A4, makelist (i, i, 1, 2*3*5));
(%o11) {Array:  #3A(((1 2 3 4 5) (6 7 8 9 10) (11 12 13 14 15))
    ((16 17 18 19 20) (21 22 23 24 25) (26 27 28 29 30)))}
(%i12) A4 [0, 2, 1];
(%o12)                         12
</pre></div>

<div class=categorybox>
Категории:<a href="maxima_263.html#Category_003a-_041c_0430_0441_0441_0438_0432_044b">Массивы</a>
&middot;</div>
</dd></dl>

<a name="Item_003a-Arrays_002fdeffn_002frearray"></a><dl>
<dt><a name="index-rearray"></a>Функция: <strong>rearray</strong> <em>(<var>A</var>, <var>dim_1</var>, ..., <var>dim_n</var>)</em></dt>
<dd><p>Изменяет размерность массива.  Новый массив будет заполнен элементами
старого построчно.  Если исходный массив слишком мал, тогда
остаток заполняется <code>false</code>, <code>0.0</code> или <code>0</code>,
в зависимости от типа массива.  Тип массива не может быть изменен.
</p>
<div class=categorybox>
Категории:<a href="maxima_263.html#Category_003a-_041c_0430_0441_0441_0438_0432_044b">Массивы</a>
&middot;</div>
</dd></dl>

<a name="Item_003a-Arrays_002fdeffn_002fremarray"></a><dl>
<dt><a name="index-remarray"></a>Функция: <strong>remarray</strong> <em>(<var>A_1</var>, ..., <var>A_n</var>)</em></dt>
<dt><a name="index-remarray-1"></a>Функция: <strong>remarray</strong> <em>(all)</em></dt>
<dd><p>Удаляет массив, все ассоциированные с ним функции и
освобождает занимаемую им память.
Аргументы должны быть: объявленными массивами, необъявленными (хеш)
массивами, функциями-массивами или функциями с индексом.
</p>
<p><code>remarray (all)</code> удаляет все элементы в глобальном списке <code>arrays</code>.
</p>
<p>Использование <code>remarray</code> может требоваться если
необходимо переопределить значения элементов
необъявленного (хеш) массива.
</p>
<p><code>remarray</code> возвращает список удаленных массивов.
</p>
<div class=categorybox>
Категории:<a href="maxima_263.html#Category_003a-_041c_0430_0441_0441_0438_0432_044b">Массивы</a>
&middot;</div>
</dd></dl>

<a name="Item_003a-Arrays_002fdeffn_002fsubvar"></a><dl>
<dt><a name="index-subvar"></a>Функция: <strong>subvar</strong> <em>(<var>x</var>, <var>i</var>)</em></dt>
<dd><p>Вычисляет выражение с индексом <code><var>x</var>[<var>i</var>]</code>.
</p>
<p><code>subvar</code> вычисляет свои аргументы.
</p>
<p><code>arraymake (<var>x</var>, [<var>i</var>]</code> составляет выражение <code><var>x</var>[<var>i</var>]</code>,
но не вычисляет его.
</p>
<p>Примеры:
</p>
<div class="example">
<pre class="example">(%i1) x : foo $

(%i2) i : 3 $

(%i3) subvar (x, i);
(%o3)                         foo
                                 3
(%i4) foo : [aa, bb, cc, dd, ee]$

(%i5) subvar (x, i);
(%o5)                          cc
(%i6) arraymake (x, [i]);
(%o6)                         foo
                                 3
(%i7) ''%;
(%o7)                          cc
</pre></div>

<div class=categorybox>
Категории:<a href="maxima_263.html#Category_003a-_0412_044b_0440_0430_0436_0435_043d_0438_044f">Выражения</a>
&middot;<a href="maxima_263.html#Category_003a-_041c_0430_0441_0441_0438_0432_044b">Массивы</a>
&middot;</div>
</dd></dl>

<a name="Item_003a-Arrays_002fdefvr_002fuse_005ffast_005farrays"></a><dl>
<dt><a name="index-use_005ffast_005farrays"></a>Управляющая переменная: <strong>use_fast_arrays</strong></dt>
<dd><p>&ndash; если <code>true</code>, тогда используются только два типа массивов.
</p>
<p>1) Art-q массивы (t в Common Lisp), которые имеют несколько
целочисленных индексов, и могут содержать любые Lisp или Maxima
объекты.  Для создания таких массивов используется функция
<code>make_array</code>.  Например <code>a:make_array(any,3,4);</code>.
Значение <code>a</code> &ndash; массив из 12 элементов. Отсчет индексов
ведется с 0.
</p>
<p>2) Hash_table массивы, создающиеся по умолчанию если выполняется
присваивания <code>b[x+1]:y^2</code> если <code>b</code> еще пока не является
массивом, списком или матрицей (во всех этих случаях должна возникнуть
ошибка т.к. <code>x+1</code> в общем случае не является допустимым индексом
для art-q массива, списка или матрицы).  Индексом такого массива
(также называется ключем) может быть произвольный объект.
Используется только один ключ одновременно, так в <code>b[x+1,u]:y</code>
игнорирует <code>u</code> а соответствие устанавливается по
<code>b[x+1] ==&gt; y^2</code>.  Разумеется ключ может быть списком, например
<code>b[[x+1,u]]:y</code> вполне допустимо.  Это не совместимо со старыми
хешируемыми массивами, но экономит память.
</p>
<p>Преимущество хранения массивов в значении переменной состоит в том,
что в этом случае массивы следуют обычным соглашениям о локальных
переменных.  Кроме того Hash_table массивы более эффективны и
используют меньше памяти, чем старые хешируемые массивы.  Для
одинакового поведения в интерпретируемом и компилируемом коде
необходимо установить значение <code>translate_fast_arrays</code> равным
<code>true</code>.
</p>
<div class=categorybox>
Категории:<a href="maxima_263.html#Category_003a-_041c_0430_0441_0441_0438_0432_044b">Массивы</a>
&middot;<a href="maxima_263.html#Category_003a-_0413_043b_043e_0431_0430_043b_044c_043d_044b_0435-_0444_043b_0430_0433_0438">Глобальные флаги</a>
&middot;</div>
</dd></dl>


<hr>
<div class="header">
<p>
Previous: <a href="maxima_88.html#g_t_041c_0430_0441_0441_0438_0432_044b" accesskey="p" rel="previous">Массивы</a>, Up: <a href="maxima_88.html#g_t_041c_0430_0441_0441_0438_0432_044b" accesskey="u" rel="up">Массивы</a> &nbsp; [<a href="maxima_toc.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="maxima_262.html#g_t_0423_043a_0430_0437_0430_0442_0435_043b_044c-_0444_0443_043d_043a_0446_0438_0439-_0438-_043f_0435_0440_0435_043c_0435_043d_043d_044b_0445" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
