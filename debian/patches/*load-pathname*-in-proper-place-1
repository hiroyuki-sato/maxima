Description: <short summary of the patch>
 TODO: Put a short summary on the line above and replace this paragraph
 with a longer explanation of this change. Complete the meta-information
 with other relevant fields (see below for details). To make it easier, the
 information below has been extracted from the changelog. Adjust it or drop
 it.
 .
 maxima (5.37.2-8) unstable; urgency=medium
 .
   * Bug fix: "FTBFS on mips64el", thanks to James Cowgill (Closes:
     #775728). Rebuild against latest gcl
Author: Camm Maguire <camm@debian.org>
Bug-Debian: https://bugs.debian.org/775728

---
The information above should follow the Patch Tagging Guidelines, please
checkout http://dep.debian.net/deps/dep3/ to learn about the format. Here
are templates for supplementary fields that you might want to add:

Origin: <vendor|upstream|other>, <url of original patch>
Bug: <url in upstream bugtracker>
Bug-Debian: https://bugs.debian.org/<bugnumber>
Bug-Ubuntu: https://launchpad.net/bugs/<bugnumber>
Forwarded: <no|not-needed|url proving that it has been forwarded>
Reviewed-By: <name and email of someone who approved the patch>
Last-Update: <YYYY-MM-DD>

--- maxima-5.37.2.orig/doc/info/build_index.pl
+++ maxima-5.37.2/doc/info/build_index.pl
@@ -251,7 +251,7 @@ print ")))\n";
 
 #        Construct hashtables from the lists given above.
 
-print "(load-info-hashtables (list (pathname-device #-gcl *load-pathname* #+gcl sys:*load-pathname*) (pathname-directory #-gcl *load-pathname* #+gcl sys:*load-pathname*)) deffn-defvr-pairs section-pairs))\n";
+print "(load-info-hashtables (list (pathname-device *load-pathname*) (pathname-directory *load-pathname*)) deffn-defvr-pairs section-pairs))\n";
 
 # (2.3)  Do we have any items or sections?
 #
--- maxima-5.37.2.orig/doc/info/de.utf8/maxima-index.lisp
+++ maxima-5.37.2/doc/info/de.utf8/maxima-index.lisp
@@ -2673,4 +2673,4 @@
 ("Zufallszahlen" . ("maxima.info-2" 176979 2673))
 ("Zuweisungsoperatoren" . ("maxima.info-1" 291827 9886))
 )))
-(load-info-hashtables (list (pathname-device #-gcl *load-pathname* #+gcl sys:*load-pathname*) (pathname-directory #-gcl *load-pathname* #+gcl sys:*load-pathname*)) deffn-defvr-pairs section-pairs))
+(load-info-hashtables (list (pathname-device *load-pathname*) (pathname-directory *load-pathname*)) deffn-defvr-pairs section-pairs))
--- maxima-5.37.2.orig/doc/info/de/maxima-index.lisp
+++ maxima-5.37.2/doc/info/de/maxima-index.lisp
@@ -3119,4 +3119,4 @@
 ("Zufallszahlen" . ("maxima.info-2" 175691 2676))
 ("Zuweisungsoperatoren" . ("maxima.info-1" 289910 9871))
 )))
-(load-info-hashtables (list (pathname-device #-gcl *load-pathname* #+gcl sys:*load-pathname*) (pathname-directory #-gcl *load-pathname* #+gcl sys:*load-pathname*)) deffn-defvr-pairs section-pairs))
+(load-info-hashtables (list (pathname-device *load-pathname*) (pathname-directory *load-pathname*)) deffn-defvr-pairs section-pairs))
--- maxima-5.37.2.orig/doc/info/es.utf8/maxima-index.lisp
+++ maxima-5.37.2/doc/info/es.utf8/maxima-index.lisp
@@ -2683,4 +2683,4 @@
 ("Share" . ("maxima.info-5" 92734 592))
 ("VisualizaciÃ³n usando VTK" . ("maxima.info-7" 168587 16606))
 )))
-(load-info-hashtables (list (pathname-device #-gcl *load-pathname* #+gcl sys:*load-pathname*) (pathname-directory #-gcl *load-pathname* #+gcl sys:*load-pathname*)) deffn-defvr-pairs section-pairs))
+(load-info-hashtables (list (pathname-device *load-pathname*) (pathname-directory *load-pathname*)) deffn-defvr-pairs section-pairs))
--- maxima-5.37.2.orig/doc/info/es/maxima-index.lisp
+++ maxima-5.37.2/doc/info/es/maxima-index.lisp
@@ -3129,4 +3129,4 @@
 ("Share" . ("maxima.info-4" 283571 593))
 ("Visualización usando VTK" . ("maxima.info-7" 7940 16632))
 )))
-(load-info-hashtables (list (pathname-device #-gcl *load-pathname* #+gcl sys:*load-pathname*) (pathname-directory #-gcl *load-pathname* #+gcl sys:*load-pathname*)) deffn-defvr-pairs section-pairs))
+(load-info-hashtables (list (pathname-device *load-pathname*) (pathname-directory *load-pathname*)) deffn-defvr-pairs section-pairs))
--- maxima-5.37.2.orig/doc/info/pt.utf8/maxima-index.lisp
+++ maxima-5.37.2/doc/info/pt.utf8/maxima-index.lisp
@@ -1888,4 +1888,4 @@
 ("Substantivos e Verbos" . ("maxima.info-1" 144085 2474))
 ("VisualizaÃ§Ã£o usando VTK" . ("maxima.info-5" 201854 353))
 )))
-(load-info-hashtables (list (pathname-device #-gcl *load-pathname* #+gcl sys:*load-pathname*) (pathname-directory #-gcl *load-pathname* #+gcl sys:*load-pathname*)) deffn-defvr-pairs section-pairs))
+(load-info-hashtables (list (pathname-device *load-pathname*) (pathname-directory *load-pathname*)) deffn-defvr-pairs section-pairs))
--- maxima-5.37.2.orig/doc/info/pt/maxima-index.lisp
+++ maxima-5.37.2/doc/info/pt/maxima-index.lisp
@@ -2238,4 +2238,4 @@
 ("Substantivos e Verbos" . ("maxima.info-1" 141644 2474))
 ("Visualização usando VTK" . ("maxima.info-5" 142641 353))
 )))
-(load-info-hashtables (list (pathname-device #-gcl *load-pathname* #+gcl sys:*load-pathname*) (pathname-directory #-gcl *load-pathname* #+gcl sys:*load-pathname*)) deffn-defvr-pairs section-pairs))
+(load-info-hashtables (list (pathname-device *load-pathname*) (pathname-directory *load-pathname*)) deffn-defvr-pairs section-pairs))
--- maxima-5.37.2.orig/doc/info/pt_BR.utf8/maxima-index.lisp
+++ maxima-5.37.2/doc/info/pt_BR.utf8/maxima-index.lisp
@@ -2035,4 +2035,4 @@
 ("Sintaxe" . ("maxima.info-1" 156957 4247))
 ("Substantivos e Verbos" . ("maxima.info-1" 148614 2483))
 )))
-(load-info-hashtables (list (pathname-device #-gcl *load-pathname* #+gcl sys:*load-pathname*) (pathname-directory #-gcl *load-pathname* #+gcl sys:*load-pathname*)) deffn-defvr-pairs section-pairs))
+(load-info-hashtables (list (pathname-device *load-pathname*) (pathname-directory *load-pathname*)) deffn-defvr-pairs section-pairs))
--- maxima-5.37.2.orig/doc/info/pt_BR/maxima-index.lisp
+++ maxima-5.37.2/doc/info/pt_BR/maxima-index.lisp
@@ -2379,4 +2379,4 @@
 ("Sintaxe" . ("maxima.info-1" 154214 4238))
 ("Substantivos e Verbos" . ("maxima.info-1" 146036 2483))
 )))
-(load-info-hashtables (list (pathname-device #-gcl *load-pathname* #+gcl sys:*load-pathname*) (pathname-directory #-gcl *load-pathname* #+gcl sys:*load-pathname*)) deffn-defvr-pairs section-pairs))
+(load-info-hashtables (list (pathname-device *load-pathname*) (pathname-directory *load-pathname*)) deffn-defvr-pairs section-pairs))
--- maxima-5.37.2.orig/share/cobyla/load-bf-cobyla.lisp
+++ maxima-5.37.2/share/cobyla/load-bf-cobyla.lisp
@@ -3,8 +3,6 @@
 #+ecl
 ($load "lisp-utils/defsystem.lisp")
 
-(load (merge-pathnames (make-pathname :name "cobyla" :type "system")
-		       #-gcl *load-pathname*
-		       #+gcl sys:*load-pathname*))
+(load (merge-pathnames (make-pathname :name "cobyla" :type "system") *load-pathname*))
 
 (mk:oos "bf-cobyla-interface" :compile)
--- maxima-5.37.2.orig/share/cobyla/load-cobyla.lisp
+++ maxima-5.37.2/share/cobyla/load-cobyla.lisp
@@ -3,8 +3,6 @@
 #+ecl
 ($load "lisp-utils/defsystem.lisp")
 
-(load (merge-pathnames (make-pathname :name "cobyla" :type "system")
-		       #-gcl *load-pathname*
-		       #+gcl sys:*load-pathname*))
+(load (merge-pathnames (make-pathname :name "cobyla" :type "system") *load-pathname*))
 
 (mk:oos "cobyla-interface" :compile)
--- maxima-5.37.2.orig/share/colnew/load-colnew.lisp
+++ maxima-5.37.2/share/colnew/load-colnew.lisp
@@ -1,9 +1,5 @@
 #+nil
-(format t "colnew.system = ~S~%" (merge-pathnames (make-pathname :name "colnew" :type "system")
-						  #-gcl *load-pathname*
-						  #+gcl sys:*load-pathname*))
-(load (merge-pathnames (make-pathname :name "colnew" :type "system")
-		       #-gcl *load-pathname*
-		       #+gcl sys:*load-pathname*))
+(format t "colnew.system = ~S~%" (merge-pathnames (make-pathname :name "colnew" :type "system") *load-pathname*))
+(load (merge-pathnames (make-pathname :name "colnew" :type "system") *load-pathname*))
 
-(mk:oos "colnew-if" :compile)
\ No newline at end of file
+(mk:oos "colnew-if" :compile)
--- maxima-5.37.2.orig/share/contrib/gentran/gentran.lisp
+++ maxima-5.37.2/share/contrib/gentran/gentran.lisp
@@ -19,9 +19,7 @@
 
 (defvar local-obj-dir)
 
-(load (merge-pathnames "convmac.lisp"
-		       #-gcl *load-pathname*
-		       #+gcl sys:*load-pathname*))
+(load (merge-pathnames "convmac.lisp" *load-pathname*))
 
 (putprop 'procforttem "templt" 'autoload)
 (putprop 'procrattem "templt" 'autoload)
@@ -36,6 +34,4 @@
 
 (dolist (fname '("init" "lspfor" "lspc" "lsprat" "templt" "global" "intrfc"
 		 "pre" "output" "vaxlsp" "segmnt"))
-  (load (merge-pathnames fname
-			 #-gcl *load-pathname*
-			 #+gcl sys:*load-pathname*)))
+  (load (merge-pathnames fname *load-pathname*)))
--- maxima-5.37.2.orig/share/contrib/integration/integration-index.lisp
+++ maxima-5.37.2/share/contrib/integration/integration-index.lisp
@@ -15,4 +15,4 @@
 ("Definitions for abs_integrate" . ("abs_integrate.info" 3639 7412))
 ("Introduction to abs_integrate" . ("abs_integrate.info" 490 2999))
 )))
-(load-info-hashtables (list (pathname-device #-gcl *load-pathname* #+gcl sys:*load-pathname*) (pathname-directory #-gcl *load-pathname* #+gcl sys:*load-pathname*)) deffn-defvr-pairs section-pairs))
+(load-info-hashtables (list (pathname-device *load-pathname*) (pathname-directory *load-pathname*)) deffn-defvr-pairs section-pairs))
--- maxima-5.37.2.orig/share/contrib/maxima-odesolve/maxima-odesolve-index.lisp
+++ maxima-5.37.2/share/contrib/maxima-odesolve/maxima-odesolve-index.lisp
@@ -9,4 +9,4 @@
 ("Definitions for kovacicODE" . ("kovacicODE.info" 654 1493))
 ("Introduction to kovacicODE" . ("kovacicODE.info" 450 63))
 )))
-(load-info-hashtables (list (pathname-device #-gcl *load-pathname* #+gcl sys:*load-pathname*) (pathname-directory #-gcl *load-pathname* #+gcl sys:*load-pathname*)) deffn-defvr-pairs section-pairs))
+(load-info-hashtables (list (pathname-device *load-pathname*) (pathname-directory *load-pathname*)) deffn-defvr-pairs section-pairs))
--- maxima-5.37.2.orig/share/draw/draw-index.lisp
+++ maxima-5.37.2/share/draw/draw-index.lisp
@@ -8,4 +8,4 @@
 (section-pairs '(
 ; CONTENT: (<NODE NAME> . (<FILENAME> <BYTE OFFSET> <LENGTH IN CHARACTERS>))
 )))
-(load-info-hashtables (list (pathname-device #-gcl *load-pathname* #+gcl sys:*load-pathname*) (pathname-directory #-gcl *load-pathname* #+gcl sys:*load-pathname*)) deffn-defvr-pairs section-pairs))
+(load-info-hashtables (list (pathname-device *load-pathname*) (pathname-directory *load-pathname*)) deffn-defvr-pairs section-pairs))
--- maxima-5.37.2.orig/share/draw/draw.lisp
+++ maxima-5.37.2/share/draw/draw.lisp
@@ -4,8 +4,6 @@
 
 #+ecl ($load "lisp-utils/defsystem.lisp")
 
-(load (merge-pathnames (make-pathname :name "draw" :type "system")
-		       #-gcl *load-pathname*
-		       #+gcl sys:*load-pathname*))
+(load (merge-pathnames (make-pathname :name "draw" :type "system") *load-pathname*))
 
 (mk:oos "draw" :compile)
--- maxima-5.37.2.orig/share/graphs/load-graphs.lisp
+++ maxima-5.37.2/share/graphs/load-graphs.lisp
@@ -2,8 +2,6 @@
 
 #+ecl ($load "lisp-utils/defsystem.lisp")
 
-(load (merge-pathnames (make-pathname :name "graphs" :type "system")
-		       #-gcl *load-pathname*
-		       #+gcl sys:*load-pathname*))
+(load (merge-pathnames (make-pathname :name "graphs" :type "system") *load-pathname*))
 
 (mk:oos "graphs" :compile)
--- maxima-5.37.2.orig/share/lapack/lapack/lapack-lisp.system
+++ maxima-5.37.2/share/lapack/lapack/lapack-lisp.system
@@ -7,17 +7,14 @@
     :binary-extension "lisp")
 
 (mk:defsystem "lapack-package"
-  :source-pathname (directory-namestring #-gcl *load-pathname*
-					 #+gcl sys:*load-pathname*)
+  :source-pathname (directory-namestring *load-pathname*)
   :depends-on ("blas-package")
   :components
   ((:file "lapack-package")))
 
 (mk:defsystem "lapack-lisp"
-  :source-pathname (directory-namestring #-gcl *load-pathname*
-					 #+gcl sys:*load-pathname*)
-  :binary-pathname (make-pathname :directory (pathname-directory #-gcl *load-pathname*
-								 #+gcl sys:*load-pathname*))
+  :source-pathname (directory-namestring *load-pathname*)
+  :binary-pathname (make-pathname :directory (pathname-directory *load-pathname*))
   :depends-on ("lapack-package" "blas-lisp")
   :components
   (
--- maxima-5.37.2.orig/share/lapack/load-lapack.lisp
+++ maxima-5.37.2/share/lapack/load-lapack.lisp
@@ -9,8 +9,6 @@
 
 #+ecl ($load "lisp-utils/defsystem.lisp")
 
-(load (merge-pathnames (make-pathname :name "lapack" :type "system")
-		       #-gcl *load-pathname*
-		       #+gcl sys:*load-pathname*))
+(load (merge-pathnames (make-pathname :name "lapack" :type "system") *load-pathname*))
 
 (mk:oos "lapack-interface" :compile)
--- maxima-5.37.2.orig/share/logic/logic-index.lisp
+++ maxima-5.37.2/share/logic/logic-index.lisp
@@ -25,4 +25,4 @@
 ("Definitions for logic" . ("logic.info" 2434 10656))
 ("Introduction to logic" . ("logic.info" 386 1922))
 )))
-(load-info-hashtables (list (pathname-device #-gcl *load-pathname* #+gcl sys:*load-pathname*) (pathname-directory #-gcl *load-pathname* #+gcl sys:*load-pathname*)) deffn-defvr-pairs section-pairs))
+(load-info-hashtables (list (pathname-device *load-pathname*) (pathname-directory *load-pathname*)) deffn-defvr-pairs section-pairs))
--- maxima-5.37.2.orig/share/minpack/load-minpack.lisp
+++ maxima-5.37.2/share/minpack/load-minpack.lisp
@@ -2,8 +2,6 @@
 
 #+ecl ($load "lisp-utils/defsystem.lisp")
 
-(load (merge-pathnames (make-pathname :name "minpack" :type "system")
-		       #-gcl *load-pathname*
-		       #+gcl sys:*load-pathname*))
+(load (merge-pathnames (make-pathname :name "minpack" :type "system") *load-pathname*))
 
 (mk:oos "minpack-interface" :compile)
--- maxima-5.37.2.orig/src/init-cl.lisp
+++ maxima-5.37.2/src/init-cl.lisp
@@ -681,8 +681,7 @@ When one changes, the other does too."
   "Return a pathname string such that subdirs is a subdirectory of maxima_objdir"
   (apply #'combine-path *maxima-objdir* subdirs))
 
-;; The directory part of *load-pathname*.  GCL doesn't seem to have a
-;; usable *LOAD-PATHNAME*, but it does have SYS:*LOAD-PATHNAME*.
+;; The directory part of *load-pathname*.
 (defun maxima-load-pathname-directory ()
   "Return the directory part of *load-pathname*."
   (let ((path *load-pathname*))
